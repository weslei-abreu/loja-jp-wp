/*! For license information please see dashboard.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[4183],{3075:e=>{e.exports=function(){return this.wp.i18n}()},8601:e=>{e.exports=function(){return this.wp.element}()},10424:e=>{e.exports=function(){return this.itsec.dashboard.dashboard}()},20816:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(82284);function s(e){var t=function(e){if("object"!=(0,r.A)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=(0,r.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},30040:e=>{e.exports=function(){return this.itsec.core["active-lockouts"]}()},31987:e=>{e.exports=function(){return this.wp.data}()},38125:e=>{e.exports=function(){return this.wp.plugins}()},39959:e=>{e.exports=function(){return this.wp.components}()},46627:e=>{e.exports=function(){return this.itsec.packages.data}()},51609:e=>{"use strict";e.exports=window.React},55933:e=>{e.exports=function(){return this.wp.primitives}()},64467:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(20816);function s(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},66087:e=>{"use strict";e.exports=window.lodash},77172:e=>{e.exports=function(){return this.wp.url}()},79860:e=>{e.exports=function(){return this.wp.keycodes}()},89552:e=>{e.exports=function(){return this.itsec.core["ban-hosts"]}()},89897:e=>{e.exports=function(){return this.wp.compose}()},89959:e=>{e.exports=function(){return this.wp.date}()},98616:e=>{e.exports=function(e,t){var n,r,s=0;function i(){var i,o,c=n,a=arguments.length;e:for(;c;){if(c.args.length===arguments.length){for(o=0;o<a;o++)if(c.args[o]!==arguments[o]){c=c.next;continue e}return c!==n&&(c===r&&(r=c.prev),c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.next=n,c.prev=null,n.prev=c,n=c),c.val}c=c.next}for(i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return c={args:i,val:e.apply(null,i)},n?(n.prev=c,c.next=n):r=c,s===t.maxSize?(r=r.prev).next=null:s++,n=c,c.val}return t=t||{},i.clear=function(){n=null,r=null,s=0},i}},98883:(e,t,n)=>{"use strict";n.d(t,{Yb:()=>v,ML:()=>w,$I:()=>y,Mj:()=>E,SV:()=>b,ee:()=>m,sy:()=>u,qY:()=>l,kk:()=>p,wl:()=>h,pq:()=>c});var r=n(58168),s=n(51609),i=n(8601),o=n(89897);function c(e){return(0,o.createHigherOrderComponent)((t=>class extends i.Component{render(){return(0,s.createElement)(t,(0,r.A)({},this.props,e))}}),"withProps")}var a=n(66087);function u(e,t,n={}){return(0,o.createHigherOrderComponent)((r=>class extends i.Component{constructor(){super(...arguments),this.debouncedPropInvoke=(0,a.debounce)(((...t)=>this.props[e](...t)),"function"==typeof t?t(this.props):t,n),this.handler=(e,...t)=>(e&&"function"==typeof e.persist&&e.persist(),this.debouncedPropInvoke(e,...t))}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return(0,s.createElement)(r,t)}}),"withDebounceHandler")}function l(e,t){let n;return n=(0,a.isFunction)(t)?[{delay:e,cb:t}]:e,(0,o.createHigherOrderComponent)((e=>class extends i.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of n)(t=>{this.intervalIds.push(setInterval((()=>t(this.props)),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return(0,s.createElement)(e,this.props)}}),"withInterval")}var d=n(64467);(0,o.createHigherOrderComponent)((e=>{var t;return t=class extends i.Component{constructor(...e){super(...e),(0,d.A)(this,"state",{width:1280}),(0,d.A)(this,"mounted",!1),(0,d.A)(this,"ref",null),(0,d.A)(this,"onWindowResize",(()=>{if(!this.mounted)return;const e=(0,i.findDOMNode)(this);if(e instanceof window.HTMLElement){const t=e.offsetWidth;this.setState({width:t})}}))}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").addEventListener("click",this.onWindowResize),this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").removeEventListener("click",this.onWindowResize)}render(){const{measureBeforeMount:t,...n}=this.props;return t&&!this.mounted?(0,s.createElement)("div",{className:this.props.className,style:this.props.style}):(0,s.createElement)(e,(0,r.A)({},n,{width:this.state.width+20}))}},(0,d.A)(t,"defaultProps",{measureBeforeMount:!1}),t}),"withWidth");const h=(0,o.createHigherOrderComponent)((e=>class extends i.Component{constructor(){super(...arguments),(0,d.A)(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),(0,d.A)(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return(0,s.createElement)(e,(0,r.A)({pressedModifierKeys:this.state.pressed},this.props))}}),"withPressedModifierKeys"),p=(0,o.createHigherOrderComponent)((e=>function({navigate:t,...n}){return(0,s.createElement)(e,(0,r.A)({},n,{onClick:e=>{try{n.onClick&&n.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||n.target&&"_self"!==n.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),t())}}))}),"withNavigate"),f=new WeakMap;function m(e,t){(0,i.useLayoutEffect)((()=>{f.has(e)||(t(),f.set(e,!0))}),[])}function v(e,t=!0){const[n,r]=(0,i.useState)("idle"),[s,o]=(0,i.useState)(null),[c,a]=(0,i.useState)(null),u=(0,i.useCallback)(((...t)=>(r("pending"),a(null),e(...t).then((e=>{o(e),r("success")})).catch((e=>{a(e),o(null),r("error")})))),[e]);return(0,i.useEffect)((()=>{t&&u()}),[u,t]),{execute:u,status:n,value:s,error:c}}function w(e,t,n=window){const r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current=t}),[t]),(0,i.useEffect)((()=>{if(!n||!n.addEventListener)return;const t=e=>r.current(e);return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}),[e,n])}const g=["button","submit"];function y(e){const t=(0,i.useRef)(e);(0,i.useEffect)((()=>{t.current=e}),[e]);const n=(0,i.useRef)(!1),r=(0,i.useRef)(),s=(0,i.useCallback)((()=>{clearTimeout(r.current)}),[]);(0,i.useEffect)((()=>()=>s()),[]),(0,i.useEffect)((()=>{e||s()}),[e,s]);const o=(0,i.useCallback)((e=>{const{type:t,target:r}=e;(0,a.includes)(["mouseup","touchend"],t)?n.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,a.includes)(g,e.type)}return!1}(r)&&(n.current=!0)}),[]),c=(0,i.useCallback)((e=>{e.persist(),n.current||(r.current=setTimeout((()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()}),0))}),[]);return{onFocus:s,onMouseDown:o,onMouseUp:o,onTouchStart:o,onTouchEnd:o,onBlur:c}}function E(e,t){const[n,r]=(0,i.useState)((()=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error(e),t}}));return[n,t=>{try{const s=t instanceof Function?t(n):t;r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}function b(e){const t=(0,i.useRef)(null),n=(0,i.useRef)(!1),r=(0,i.useRef)(e),s=(0,i.useRef)(e);return s.current=e,(0,i.useLayoutEffect)((()=>{e.forEach(((e,s)=>{const i=r.current[s];"function"==typeof e&&e!==i&&!1===n.current&&(i(null),e(t.current))})),r.current=e}),e),(0,i.useLayoutEffect)((()=>{n.current=!1})),(0,i.useCallback)((e=>{t.current=e,n.current=!0,(e?s.current:r.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}n(31987),n(46627)},99204:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{default:()=>m,settings:()=>w,slug:()=>v});var s={};n.r(s),n.d(s,{settings:()=>L,slug:()=>C});var i=n(51609),o=n(38125),c=n(3075),a=n(31987),u=n(98883),l=n(10424),d=n(89552),h=n(81923),p=n(88356);const f=(0,h.A)(p.ui,{target:"ed2ujrb0"})({name:"1x7nnnc",styles:"display:flex;flex-direction:column;justify-content:space-between;height:100%"});function m({card:e,config:t}){const{isCreating:n,setCreating:r,isSaving:s,setSaving:o,isQuerying:c,createBan:a,afterSave:u,query:h,selected:p,onSelect:m}=(0,d.useBanHosts)("dashboard"),v=`itsec-ban-card-create-form__${e.id}`;return(0,i.createElement)(f,null,(0,i.createElement)(l.CardHeader,null,(0,i.createElement)(l.CardHeaderTitle,{card:e,config:t})),!n&&(0,i.createElement)(React.Fragment,null,(0,i.createElement)(d.List,{selected:!n&&p,onSelect:m,querying:c,query:h,queryId:"dashboard"})),n&&(0,i.createElement)(d.AddNew,{id:v,createForm:n,save:a,setSaving:o,afterSave:u}),(0,i.createElement)(d.BanHostsActions,{isCreating:n,isSaving:s,setCreating:r,formId:v}))}const v="banned-users-list",w={render:m};var g=n(66087),y=n(98616),E=n.n(y),b=n(89897),k=n(30040);const x=(0,h.A)(p.ui,{target:"e1pw40vw0"})({name:"1973lfh",styles:"display:flex;flex-direction:column;overflow:hidden;height:100%;position:relative"}),A=E()((function(e,t){return e.map((e=>({...e,links:t})))})),C="active-lockouts",L={render:(0,b.compose)([(0,u.sy)("query",500,{leading:!0}),b.pure])((function({card:e,config:t}){const{selectedId:n,searchTerm:r,setSearchTerm:s,isQuerying:o,query:a,select:u,getDetails:d,onBan:h,onRelease:f,isBanAvailable:m,isReleaseAvailable:v,releasingIds:w,banningIds:y}=(0,k.useActiveLockouts)(e),E=(0,g.find)(e.data.lockouts,["id",n]),b=E?.bannable&&m;return(0,i.createElement)(x,{className:"itsec-card--type-active-lockouts"},(0,i.createElement)(l.CardHeader,{align:"left"},(0,i.createElement)(p.vp,{isSinglePane:!0,onSelect:u,selectedId:E?.id||0}),(0,i.createElement)(l.CardHeaderTitle,{card:e,config:t})),!E?.id&&(0,i.createElement)(k.Search,{searchTerm:r,setSearchTerm:s,isQuerying:o,query:a,queryId:e.id}),(0,g.isEmpty)(e.data.lockouts)?(0,i.createElement)(l.CardHappy,{title:(0,c.__)("All Clear!","better-wp-security"),text:(0,c.__)("No users are currently locked out of your site.","better-wp-security")}):(0,i.createElement)(k.List,{lockouts:A(e.data.lockouts,e._links),select:u,selectedLockout:E,fetchLockoutDetails:d}),E?.id>0&&(v||b)&&(0,i.createElement)(k.ActiveLockoutActions,{isReleaseAvailable:v,selectedId:n,releasingIds:w,onRelease:f,isBannable:b,banningIds:y,onBan:h}))}))};function S(){const{registerCard:e}=(0,a.useDispatch)("ithemes-security/dashboard");return(0,u.ee)(S,(()=>[r,s].forEach((({slug:t,settings:n})=>e(t,n))))),null}n.p=window.itsecWebpackPublicPath,(0,c.setLocaleData)({"":{}},"ithemes-security-pro"),(0,o.registerPlugin)("itsec-core-dashboard",{render:()=>(0,i.createElement)(S,null)})}},e=>{e.O(0,[8356],(()=>e(e.s=99204)));var t=e.O();((window.itsec=window.itsec||{}).core=window.itsec.core||{}).dashboard=t}]);