(()=>{"use strict";function t(t,e,o,n,a,s,i,d){var r,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=o,p._compiled=!0),n&&(p.functional=!0),s&&(p._scopeId="data-v-"+s),i?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},p._ssrRegister=r):a&&(r=d?function(){a.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:a),r)if(p.functional){p._injectStyles=r;var l=p.render;p.render=function(t,e){return r.call(e),l(t,e)}}else{var c=p.beforeCreate;p.beforeCreate=c?[].concat(c,r):[r]}return{exports:t,options:p}}const e=t({name:"shipping",data:()=>({})},(function(){var t=this._self._c;return t("div",{attrs:{id:"dokan-shipping-zone"}},[t("router-view")],1)}),[],!1,null,"1ddd30dc",null).exports,o=t({name:"Main",data:()=>({shippingZone:{}}),methods:{getShippingMethod(t){var e=[];return Object.keys(t).forEach((o=>{var n='<span class="'+("yes"==t[o].enabled?"is-enabled":"is-disabled")+'">'+t[o].title+"</span>";e.push(n)})),e.join(", ")},fetchShippingZone(){var t=this,e={action:"dokan-get-shipping-zone",nonce:dokan.nonce};jQuery("#dokan-shipping-zone").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.shippingZone=e.data,jQuery("#dokan-shipping-zone").unblock()):(jQuery("#dokan-shipping-zone").unblock(),alert(e.data))}))}},created(){this.fetchShippingZone()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shipping-zone"},[e("table",{staticClass:"dokan-table shipping-zone-table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.__("Zone Name","dokan")))]),t._v(" "),e("th",{domProps:{innerHTML:t._s(t.__("Region(s)","dokan"))}}),t._v(" "),e("th",[t._v(t._s(t.__("Shipping Method","dokan")))])])]),t._v(" "),e("tbody",[Object.keys(t.shippingZone).length>0?t._l(t.shippingZone,(function(o){return e("tr",[e("td",[e("router-link",{attrs:{to:{name:"Zone",params:{zoneID:o.zone_id}}}},[t._v(t._s(o.zone_name))]),t._v(" "),e("div",{staticClass:"row-actions"},[e("router-link",{attrs:{to:{name:"Zone",params:{zoneID:o.zone_id}}}},[t._v(t._s(t.__("Edit","dokan")))])],1)],1),t._v(" "),e("td",[t._v("\n                        "+t._s(o.formatted_zone_location)+"\n                    ")]),t._v(" "),e("td",[t.getShippingMethod(o.shipping_methods)?e("p",{domProps:{innerHTML:t._s(t.getShippingMethod(o.shipping_methods))}}):e("p",[e("span",[t._v(t._s(t.__("No method found","dokan"))+"Â ")]),t._v(" "),e("router-link",{attrs:{to:{name:"Zone",params:{zoneID:o.zone_id}}}},[t._v(" "+t._s(t.__("Add Shipping Method","dokan")))])],1)])])})):[e("tr",[e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.__("No shipping zone found for configuration. Please contact the admin to manage your store's shipping","dokan")))])])]],2)])])}),[],!1,null,null,null).exports,n=t({name:"Zone",components:{Switches:dokan_get_lib("Switches"),Modal:dokan_get_lib("Modal"),Multiselect:dokan_get_lib("Multiselect")},data(){return{successMessage:"",showAddShippingMethodModal:!1,editShippingMethodModal:!1,wantToLimitLocation:!1,zone:{data:{zone_name:""},formatted_zone_location:""},state:[],country:[],postcode:[],continent:[],showCountryList:!1,showStateList:!1,showPostCodeList:!1,stateList:[],countryList:[],zoneShippingMethod:{},shipping_method:"",editShippingMethodData:{method_id:"",instance_id:"0",settings:{title:"",cost:"0",description:this.__("Lets you charge a rate for shipping","dokan"),tax_status:"none",apply_before_coupon_discount:!1,woocommerce_free_shipping_requires:""}},cost_description:this.__("Enter a cost (excl. tax) or sum, e.g. <code>10.00 * [qty]</code>. Use <code>[qty]</code> for the number of items, <code>[cost]</code> for the total cost of items, and <code>[fee percent='10' min_fee='20' max_fee='']</code> for percentage based fees.","dokan"),editShippingMethodTitle:this.__("Edit Shipping Method","dokan"),postCodeTitle:this.__("Postcodes need to be comma separated","dokan"),availableMethods:{}}},computed:{zoneLocation(){return _.groupBy(this.zone.data.zone_locations,"type")},showLimitLocationLink(){return void 0===this.zoneLocation.postcode},shippingClasses:()=>dokanShipping.shipping_class,requiresValue:{get(){return void 0!==this.editShippingMethodData.settings.requires?this.editShippingMethodData.settings.requires:""},set(t){this.$set(this.editShippingMethodData.settings,"requires",t)}}},methods:{wantToSetLocation(){this.wantToLimitLocation=!this.wantToLimitLocation},onSwitch(t,e,o){var n=this,a={action:"dokan-toggle-shipping-method-enabled",zoneID:n.$route.params.zoneID,instance_id:e,checked:t,nonce:dokan.nonce};jQuery(".zone-method-wrapper").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,a,(function(e){e.success?(o.enabled=t?"yes":"no",n.successMessage=e.data,jQuery(".zone-method-wrapper").unblock(),setTimeout((function(){n.successMessage=""}),2e3)):(jQuery(".zone-method-wrapper").unblock(),alert(e.data))}))},saveZoneSettings(){var t=this,e={action:"dokan-save-zone-settings",continent:t.continent,country:t.country,state:void 0===t.state||0==t.state.length?[]:t.state,postcode:t.wantToLimitLocation?t.postcode:"",zoneID:t.$route.params.zoneID,nonce:dokan.nonce};jQuery("#dokan-shipping-zone").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.successMessage=e.data,jQuery("#dokan-shipping-zone").unblock()):(jQuery("#dokan-shipping-zone").unblock(),alert(e.data))}))},editShippingMethod(t){"apply_before_coupon_discount"in t.settings&&(t.settings.apply_before_coupon_discount="false"!==t.settings.apply_before_coupon_discount),this.editShippingMethodData={instance_id:t.instance_id,method_id:t.id,settings:t.settings,is_tax_status:t.is_tax_status},this.editShippingMethodModal=!0},openTableRateSettings(t){let e=this.getSettingsBaseUrl();e&&window.location.assign(`${e}table-rate-shipping/?zone_id=${this.$route.params.zoneID}&instance_id=${t.instance_id}`)},openDistanceRateSettings(t){let e=this.getSettingsBaseUrl();e&&window.location.assign(`${e}distance-rate-shipping/?zone_id=${this.$route.params.zoneID}&instance_id=${t.instance_id}`)},getSettingsBaseUrl(){let t=window.location.href;if(t.includes("shipping"))t=t.split("#")[0].split("shipping")[0];else{const e=t.split("#")[0].split("/");t=e.splice(-2,1)&&e.join("/")}return t},deleteShippingMethod(t){var e=this,o={action:"dokan-delete-shipping-method",zoneID:e.$route.params.zoneID,instance_id:t.instance_id,nonce:dokan.nonce};jQuery(".zone-method-wrapper").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,o,(function(t){t.success?(e.fetchZone(),e.successMessage=t.data,e.saveZoneSettings(),jQuery(".zone-method-wrapper").unblock()):(jQuery(".zone-method-wrapper").unblock(),alert(t.data))}))},updateShippingMethodSettings(){var t=this,e={action:"dokan-update-shipping-method-settings",data:t.editShippingMethodData,zoneID:t.$route.params.zoneID,nonce:dokan.nonce};jQuery(".zone-method-wrapper").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.fetchZone(),t.editShippingMethodModal=!1,t.saveZoneSettings(),jQuery(".zone-method-wrapper").unblock()):(jQuery(".zone-method-wrapper").unblock(),alert(e.data))}))},getStatesFromCountry(t){var e=[];return _.each(t,(function(t){if(void 0!==dokanShipping.states[t]){var o=Object.keys(dokanShipping.states[t]).map((e=>({code:t+":"+e,name:dokanShipping.states[t][e]})));o.length>0&&(e=e.concat(e,o))}})),e},getCountryFromContinent(t){var e=[];return _.each(t,(function(t){e=e.concat(dokanShipping.continents[t].countries)})),e.map((t=>({code:t,name:dokanShipping.allowed_countries[t]})))},setStateForChosenCountry(t,e){var o=_.pluck(t,"code");this.stateList=this.getStatesFromCountry(o)},fetchZone(){var t=this,e={action:"dokan-get-shipping-zone",zoneID:t.$route.params.zoneID,nonce:dokan.nonce};jQuery("#dokan-shipping-zone").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){if(e.success){if(t.zone=e.data,t.zoneShippingMethod=e.data.shipping_methods,t.availableMethods=e.data.available_methods,t.zone.locations.length<1&&(t.zone.locations=e.data.data.zone_locations),e.data.locations.length>0){var o=_.groupBy(e.data.locations,"type");Object.keys(o).includes("postcode")&&(t.wantToLimitLocation=!0),Object.keys(o).forEach((function(e){"continent"==e?t.continent=o[e].map((t=>({code:t.code,name:dokanShipping.continents[t.code].name}))):"country"==e?t.country=o[e].map((t=>({code:t.code,name:dokanShipping.allowed_countries[t.code]}))):"state"==e?t.state=o[e].map((t=>{var e=t.code.split(":");return{code:t.code,name:dokanShipping.states[e[0]][e[1]]}})):"postcode"==e&&(t.postcode=_.pluck(o[e],"code").join(","),void 0!==t.zoneLocation.postcode&&(t.postcode=_.pluck(t.zoneLocation.postcode,"code").join(",")))}))}var n=Object.keys(t.zoneLocation);if(n.indexOf("postcode")<0)if(n.indexOf("state")>=0)t.showPostCodeList=!0;else if(n.indexOf("country")>=0){t.showStateList=!0,t.showPostCodeList=!0;var a=_.pluck(t.zoneLocation.country,"code");t.stateList=t.getStatesFromCountry(a)}else if(n.indexOf("continent")>=0){t.showCountryList=!0,t.showStateList=!0,t.showPostCodeList=!0,a=_.pluck(t.country,"code");var s=_.pluck(t.zoneLocation.continent,"code");t.countryList=t.getCountryFromContinent(s),t.stateList=t.getStatesFromCountry(a)}jQuery("#dokan-shipping-zone").unblock()}else jQuery("#dokan-shipping-zone").unblock(),alert(e.data)}))},addNewMethod(){var t=this,e={action:"dokan-add-shipping-method",zoneID:t.$route.params.zoneID,nonce:dokan.nonce,method:t.shipping_method};e.settings={title:""!=t.shipping_method?this.availableMethods[t.shipping_method]:"",cost:"0",description:this.__("Lets you charge a rate for shipping","dokan"),tax_status:"none",woocommerce_free_shipping_requires:""},jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.fetchZone(),t.showAddShippingMethodModal=!1,t.successMessage=e.data,t.saveZoneSettings()):alert(e.data)}))}},created(){this.fetchZone()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"zone-component"},[t.successMessage?e("div",{staticClass:"dokan-alert dokan-alert-success"},[e("span",{domProps:{innerHTML:t._s(t.successMessage)}}),t._v(" "),e("a",{staticClass:"dokan-close",attrs:{"data-dismiss":"alert"}},[t._v("Ã")])]):t._e(),t._v(" "),e("form",{attrs:{action:"",method:"post"}},[e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right",attrs:{for:""}},[t._v("\n                "+t._s(t.__("Zone Name","dokan"))+" :\n            ")]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[t._v("\n                "+t._s(t.zone.data.zone_name)+"\n            ")])]),t._v(" "),e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right",attrs:{for:""}},[t._v("\n                "+t._s(t.__("Zone Location","dokan"))+" :\n            ")]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[e("p",[t._v(t._s(t.zone.formatted_zone_location))])])]),t._v(" "),t.showCountryList?e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right"},[t._v("\n                "+t._s(t.__("Select Country","dokan"))+"\n            ")]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[e("multiselect",{attrs:{options:t.countryList,placeholder:t.__("Select Country","dokan"),multiple:!0,label:"name","track-by":"code"},on:{input:t.setStateForChosenCountry},scopedSlots:t._u([{key:"option",fn:function(o){return[e("span",{domProps:{innerHTML:t._s(o.option.name)}})]}},{key:"tag",fn:function(o){return[e("span",{staticClass:"multiselect__tag"},[e("span",{domProps:{innerHTML:t._s(o.option.name)}}),t._v(" "),e("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.remove(o.option))},mousedown:function(t){return t.preventDefault(),o.remove(o.option)}}})])]}}],null,!1,472926898),model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})],1)]):t._e(),t._v(" "),t.showStateList&&t.stateList.length?e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right",attrs:{for:""}},[t._v("\n                "+t._s(t.__("Select States","dokan"))+" :\n            ")]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[e("multiselect",{attrs:{options:t.stateList,placeholder:t.__("Select States","dokan"),multiple:!0,label:"name","track-by":"code"},scopedSlots:t._u([{key:"option",fn:function(o){return[e("span",{domProps:{innerHTML:t._s(o.option.name)}})]}},{key:"tag",fn:function(o){return[e("span",{staticClass:"multiselect__tag"},[e("span",{domProps:{innerHTML:t._s(o.option.name)}}),t._v(" "),e("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.remove(o.option))},mousedown:function(t){return t.preventDefault(),o.remove(o.option)}}})])]}}],null,!1,472926898),model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1)]):t._e(),t._v(" "),t.showLimitLocationLink&&0!=this.$route.params.zoneID&&t.showPostCodeList?e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right",attrs:{for:""}},[t._v("\n                "+t._s(t.__("Limit ZIP/postcodes","dokan"))+" :\n            ")]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[t.showLimitLocationLink&&0!=this.$route.params.zoneID?e("a",{staticClass:"limit-location-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.wantToSetLocation.apply(null,arguments)}}},[e("switches",{attrs:{enabled:t.wantToLimitLocation},on:{input:t.wantToSetLocation}}),t._v(" "),e("span",[t._v(t._s(t.__("Limit your specific ZIP/postcodes","dokan")))])],1):t._e()])]):t._e(),t._v(" "),t.wantToLimitLocation&&t.showPostCodeList?e("div",{staticClass:"dokan-form-group dokan-clearfix"},[e("label",{staticClass:"dokan-w4 dokan-control-label dokan-text-right",attrs:{for:""}},[t._v("\n                "+t._s(t.__("Set your postcode","dokan"))+" "),e("i",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"fas fa-question-circle",attrs:{title:t.postCodeTitle}})]),t._v(" "),e("div",{staticClass:"dokan-w5 dokan-text-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"dokan-form-control",attrs:{name:"zone_postcode",id:"zone_postcode"},domProps:{value:t.postcode},on:{input:function(e){e.target.composing||(t.postcode=e.target.value)}}})])]):t._e(),t._v(" "),e("div",{staticClass:"dokan-edit-row zone-method-wrapper"},[e("div",{staticClass:"dokan-section-heading",attrs:{"data-togglehandler":"dokan_product_inventory"}},[e("h2",[e("i",{staticClass:"fas fa-truck",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.__("Shipping Method","dokan")))]),t._v(" "),e("p",[t._v(t._s(t.__("Add your shipping method for appropiate zone","dokan")))]),t._v(" "),e("div",{staticClass:"dokan-clearfix"})]),t._v(" "),e("div",{staticClass:"dokan-section-content"},[e("table",{staticClass:"dokan-table zone-method-table"},[e("thead",[e("tr",[e("th",{staticClass:"title"},[t._v(t._s(t.__("Method Title","dokan")))]),t._v(" "),e("th",{staticClass:"enabled"},[t._v(t._s(t.__("Status","dokan")))]),t._v(" "),e("th",{staticClass:"description"},[t._v(t._s(t.__("Description","dokan")))])])]),t._v(" "),e("tbody",[Object.keys(t.zoneShippingMethod).length?t._l(t.zoneShippingMethod,(function(o){return e("tr",[e("td",[t._v("\n                                    "+t._s(o.title)+"\n                                    "),e("div",{staticClass:"row-actions"},["dokan_table_rate_shipping"!=o.id&&"dokan_distance_rate_shipping"!=o.id?e("span",{staticClass:"edit"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.editShippingMethod(o)}}},[t._v(t._s(t.__("Edit","dokan")))]),t._v(" | ")]):t._e(),t._v(" "),"dokan_table_rate_shipping"==o.id?e("span",{staticClass:"edit"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openTableRateSettings(o)}}},[t._v(t._s(t.__("Edit","dokan")))]),t._v(" | ")]):t._e(),t._v(" "),"dokan_distance_rate_shipping"==o.id?e("span",{staticClass:"edit"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openDistanceRateSettings(o)}}},[t._v(t._s(t.__("Edit","dokan")))]),t._v(" | ")]):t._e(),t._v(" "),e("span",{staticClass:"delete"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteShippingMethod(o)}}},[t._v(t._s(t.__("Delete","dokan")))])])])]),t._v(" "),e("td",[e("switches",{attrs:{enabled:"yes"==o.enabled,value:o.instance_id},on:{input:(e,n)=>t.onSwitch(e,n,o)}})],1),t._v(" "),e("td",[t._v("\n                                    "+t._s(o.settings.description)+"\n                                ")])])})):[e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("\n                                    "+t._s(t.__("No method found","dokan"))+"\n                                ")])])]],2)])]),t._v(" "),e("div",{staticClass:"dokan-section-footer"},[e("a",{staticClass:"dokan-btn dokan-btn-theme",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showAddShippingMethodModal=!0}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" "+t._s(t.__("Add Shipping Method","dokan")))])])]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("router-link",{attrs:{to:{name:"Main"}}},[t._v("â "+t._s(t.__("Back to Zone List","dokan")))]),t._v(" "),e("input",{staticClass:"dokan-btn dokan-btn-theme dokan-right",attrs:{type:"submit"},domProps:{value:t.__("Save Changes","dokan")},on:{click:function(e){return e.preventDefault(),t.saveZoneSettings.apply(null,arguments)}}})],1),t._v(" "),e("div",{staticClass:"dokan-clearfix"})]),t._v(" "),t.showAddShippingMethodModal?e("modal",{attrs:{title:t.__("Add Shipping Method","dokan")},on:{close:function(e){t.showAddShippingMethodModal=!1}}},[e("template",{slot:"body"},[e("p",[t._v(t._s(t.__("Choose the shipping method you wish to add. Only shipping methods which support zones are listed.","dokan")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.shipping_method,expression:"shipping_method"}],staticClass:"dokan-form-control",attrs:{model:"shipping_method",id:"shipping_method"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.shipping_method=e.target.multiple?o:o[0]}}},[e("option",{attrs:{value:""}},[t._v("â "+t._s(t.__("Select a Method","dokan"))+" â")]),t._v(" "),t._l(t.availableMethods,(function(o,n){return e("option",{domProps:{value:n}},[t._v(t._s(o))])}))],2)]),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"button button-primary button-large",on:{click:function(e){return e.preventDefault(),t.addNewMethod.apply(null,arguments)}}},[t._v(t._s(t.__("Add Shipping Method","dokan")))])])],2):t._e(),t._v(" "),t.editShippingMethodModal?e("modal",{attrs:{title:t.editShippingMethodTitle},on:{close:function(e){t.editShippingMethodModal=!1}}},["free_shipping"!=t.editShippingMethodData.method_id?e("template",{slot:"body"},[e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"method_title"}},[t._v(t._s(t.__("Title","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.title,expression:"editShippingMethodData.settings.title"}],staticClass:"dokan-form-control",attrs:{type:"text",id:"method_title",placeholder:t.__("Enter method title","dokan")},domProps:{value:t.editShippingMethodData.settings.title},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"method_cost"}},[t._v(t._s(t.__("Cost","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.cost,expression:"editShippingMethodData.settings.cost"}],staticClass:"dokan-form-control",attrs:{type:"text",id:"method_cost",placeholder:"0.00"},domProps:{value:t.editShippingMethodData.settings.cost},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"cost",e.target.value)}}}),t._v(" "),"flat_rate"==t.editShippingMethodData.method_id?e("span",{staticClass:"description",domProps:{innerHTML:t._s(t.cost_description)}}):t._e()]),t._v(" "),"yes"==t.editShippingMethodData.is_tax_status?e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"method_tax_status"}},[t._v(t._s(t.__("Tax Status","dokan")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.tax_status,expression:"editShippingMethodData.settings.tax_status"}],staticClass:"dokan-form-control",attrs:{id:"method_tax_status"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.editShippingMethodData.settings,"tax_status",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"none"}},[t._v(t._s(t.__("None","dokan")))]),t._v(" "),e("option",{attrs:{value:"taxable"}},[t._v(t._s(t.__("Taxable","dokan")))])])]):t._e(),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"method_description"}},[t._v(t._s(t.__("Description","dokan")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.description,expression:"editShippingMethodData.settings.description"}],staticClass:"dokan-form-control",attrs:{id:"method_description"},domProps:{value:t.editShippingMethodData.settings.description},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"description",e.target.value)}}},[t._v(t._s(t.editShippingMethodData.settings.description))])]),t._v(" "),"flat_rate"==t.editShippingMethodData.method_id?[e("hr"),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("h3",[t._v(t._s(t.__("Shipping Class Cost","dokan")))]),t._v(" "),e("span",{staticClass:"description"},[t._v(t._s(t.__("These costs can optionally be added based on the product shipping class","dokan")))])]),t._v(" "),t._l(t.shippingClasses,(function(o){return[e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:o.slug}},[t._v('"'+t._s(o.name)+'" '+t._s(t.__("shipping class cost","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings["class_cost_"+o.term_id],expression:"editShippingMethodData.settings['class_cost_' + shippingClass.term_id]"}],staticClass:"dokan-form-control",attrs:{type:"text",id:o.slug,placeholder:"N\\A"},domProps:{value:t.editShippingMethodData.settings["class_cost_"+o.term_id]},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"class_cost_"+o.term_id,e.target.value)}}}),t._v(" "),"flat_rate"==t.editShippingMethodData.method_id?e("span",{staticClass:"description",domProps:{innerHTML:t._s(t.cost_description)}}):t._e()])]})),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"no_class_cost"}},[t._v(t._s(t.__("No shipping class cost","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.no_class_cost,expression:"editShippingMethodData.settings.no_class_cost"}],staticClass:"dokan-form-control",attrs:{type:"text",id:"no_class_cost",placeholder:"N\\A"},domProps:{value:t.editShippingMethodData.settings.no_class_cost},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"no_class_cost",e.target.value)}}}),t._v(" "),"flat_rate"==t.editShippingMethodData.method_id?e("span",{staticClass:"description",domProps:{innerHTML:t._s(t.cost_description)}}):t._e()]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"calculation_type"}},[t._v(t._s(t.__("Calculation type","dokan")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.calculation_type,expression:"editShippingMethodData.settings.calculation_type"}],staticClass:"dokan-form-control",attrs:{id:"calculation_type"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.editShippingMethodData.settings,"calculation_type",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"class"}},[t._v(t._s(t.__("Per class: Charge shipping for each shipping class individually","dokan")))]),t._v(" "),e("option",{attrs:{value:"order"},domProps:{selected:!0}},[t._v(t._s(t.__("Per order: Charge shipping for the most expensive shipping class","dokan")))])])])]:t._e()],2):e("template",{slot:"body"},[e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"method_title"}},[t._v(t._s(t.__("Method Title","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.title,expression:"editShippingMethodData.settings.title"}],staticClass:"dokan-form-control",attrs:{type:"text",id:"method_title",placeholder:t.__("Enter method title","dokan")},domProps:{value:t.editShippingMethodData.settings.title},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"dokan-free-shipping-options"}},[t._v(t._s(t.__("Free Shipping Requires","dokan")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.requiresValue,expression:"requiresValue"}],staticClass:"dokan-form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.requiresValue=e.target.multiple?o:o[0]}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.__("No Requirement","dokan")))]),t._v(" "),e("option",{attrs:{value:"coupon"}},[t._v(t._s(t.__("A valid free shipping coupon","dokan")))]),t._v(" "),e("option",{attrs:{value:"min_amount"}},[t._v(t._s(t.__("A minimum amount","dokan")))]),t._v(" "),e("option",{attrs:{value:"either"}},[t._v(t._s(t.__("A minimum amount OR coupon","dokan")))]),t._v(" "),e("option",{attrs:{value:"both"}},[t._v(t._s(t.__("A minimum amount AND coupon","dokan")))])])]),t._v(" "),void 0!==t.editShippingMethodData.settings.requires&&""!==t.editShippingMethodData.settings.requires&&"coupon"!==t.editShippingMethodData.settings.requires?e("div",{staticClass:"dokan-form-group"},[e("label",{attrs:{for:"minimum_order_amount"}},[t._v(t._s(t.__("Minimum order amount for free shipping","dokan")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.min_amount,expression:"editShippingMethodData.settings.min_amount"}],staticClass:"dokan-form-control",attrs:{type:"text",id:"minimum_order_amount",placeholder:"0.00"},domProps:{value:t.editShippingMethodData.settings.min_amount},on:{input:function(e){e.target.composing||t.$set(t.editShippingMethodData.settings,"min_amount",e.target.value)}}}),t._v(" "),"flat_rate"==t.editShippingMethodData.method_id?e("span",{staticClass:"description",domProps:{innerHTML:t._s(t.cost_description)}}):t._e()]):t._e(),t._v(" "),void 0!==t.editShippingMethodData.settings.requires&&""!==t.editShippingMethodData.settings.requires&&"coupon"!==t.editShippingMethodData.settings.requires?e("div",{staticClass:"dokan-form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editShippingMethodData.settings.apply_before_coupon_discount,expression:"editShippingMethodData.settings.apply_before_coupon_discount"}],staticClass:"dokan-checkbox-inline",attrs:{type:"checkbox",id:"apply_min_amount_rule_before_discount",placeholder:"0.00"},domProps:{checked:Array.isArray(t.editShippingMethodData.settings.apply_before_coupon_discount)?t._i(t.editShippingMethodData.settings.apply_before_coupon_discount,null)>-1:t.editShippingMethodData.settings.apply_before_coupon_discount},on:{change:function(e){var o=t.editShippingMethodData.settings.apply_before_coupon_discount,n=e.target,a=!!n.checked;if(Array.isArray(o)){var s=t._i(o,null);n.checked?s<0&&t.$set(t.editShippingMethodData.settings,"apply_before_coupon_discount",o.concat([null])):s>-1&&t.$set(t.editShippingMethodData.settings,"apply_before_coupon_discount",o.slice(0,s).concat(o.slice(s+1)))}else t.$set(t.editShippingMethodData.settings,"apply_before_coupon_discount",a)}}}),t._v(" "),e("label",{attrs:{for:"apply_min_amount_rule_before_discount"}},[t._v(" "+t._s(t.__("Apply minimum order rule before coupon discount","dokan")))])]):t._e()]),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"button button-primary button-large",on:{click:function(e){return e.preventDefault(),t.updateShippingMethodSettings.apply(null,arguments)}}},[t._v(t._s(t.__("Save Settings","dokan")))])])],2):t._e()],1)}),[],!1,null,null,null).exports,a=t({name:"Settings",data:()=>({successMessage:"",shippingSettings:{shipping_policy:"",refund_policy:"",processing_time:""}}),methods:{getProcessingTimes:()=>dokanShipping.processing_time,saveSettings(){var t=this,e={action:"dokan-save-shipping-settings",settings:t.shippingSettings,nonce:dokan.nonce};jQuery("#shipping-settings").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.successMessage=e.data,jQuery("#shipping-settings").unblock()):(jQuery("#shipping-settings").unblock(),alert(e.data))}))},getSettings(){var t=this,e={action:"dokan-get-shipping-settings",nonce:dokan.nonce};jQuery("#shipping-settings").block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),jQuery.post(dokan.ajaxurl,e,(function(e){e.success?(t.shippingSettings=e.data,jQuery("#shipping-settings").unblock()):(jQuery("#shipping-settings").unblock(),alert(e.data))}))}},created(){this.getSettings()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dokan-shipping-settings",attrs:{id:"shipping-settings"}},[t.successMessage?e("div",{staticClass:"dokan-alert dokan-alert-success"},[e("span",{domProps:{innerHTML:t._s(t.successMessage)}}),t._v(" "),e("a",{staticClass:"dokan-close",attrs:{"data-dismiss":"alert"}},[t._v("Ã")])]):t._e(),t._v(" "),e("div",{staticClass:"back-link"},[e("router-link",{attrs:{to:{name:"Main"}}},[t._v("â "+t._s(t.__("Back to Zone List","dokan")))])],1),t._v(" "),e("form",{attrs:{method:"post",id:"shipping-settings"},on:{submit:function(e){return e.preventDefault(),t.saveSettings.apply(null,arguments)}}},[e("div",{staticClass:"dokan-shipping-wrapper"},[e("div",{staticClass:"dokan-form-group"},[e("label",{staticClass:"dokan-w3",attrs:{for:"dps_pt"}},[t._v("\n                    "+t._s(t.__("Processing Time","dokan"))+"\n                    "),e("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"dokan-tooltips-help tips",attrs:{title:t.__("Write your terms, conditions and instructions about shipping","dokan")}},[e("i",{staticClass:"fas fa-question-circle"})])]),t._v(" "),e("div",{staticClass:"dokan-w6 dokan-text-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.shippingSettings.processing_time,expression:"shippingSettings.processing_time"}],staticClass:"dokan-form-control",attrs:{name:"dps_pt",id:"dps_pt"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.shippingSettings,"processing_time",e.target.multiple?o:o[0])}}},t._l(t.getProcessingTimes(),(function(o,n){return e("option",{domProps:{value:n}},[t._v(t._s(o))])})),0)])]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{staticClass:"dokan-w3",attrs:{for:"_dps_shipping_policy"}},[t._v("\n                    "+t._s(t.__("Shipping Policy","dokan"))+"\n                    "),e("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"dokan-tooltips-help tips",attrs:{title:t.__("Write your terms, conditions and instructions about shipping","dokan")}},[e("i",{staticClass:"fas fa-question-circle"})])]),t._v(" "),e("div",{staticClass:"dokan-w6 dokan-text-left"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shippingSettings.shipping_policy,expression:"shippingSettings.shipping_policy"}],staticClass:"dokan-form-control",attrs:{id:"_dps_shipping_policy",rows:"6"},domProps:{value:t.shippingSettings.shipping_policy},on:{input:function(e){e.target.composing||t.$set(t.shippingSettings,"shipping_policy",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("label",{staticClass:"dokan-w3",attrs:{for:"_dps_refund_policy"}},[t._v("\n                    "+t._s(t.__("Refund Policy","dokan"))+"\n                    "),e("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"dokan-tooltips-help tips",attrs:{title:t.__("Write your terms, conditions and instructions about refund","dokan")}},[e("i",{staticClass:"fas fa-question-circle"})])]),t._v(" "),e("div",{staticClass:"dokan-w6 dokan-text-left"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shippingSettings.refund_policy,expression:"shippingSettings.refund_policy"}],staticClass:"dokan-form-control",attrs:{rows:"6"},domProps:{value:t.shippingSettings.refund_policy},on:{input:function(e){e.target.composing||t.$set(t.shippingSettings,"refund_policy",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"dokan-form-group"},[e("div",{staticClass:"dokan-w4",staticStyle:{"margin-left":"27%"}},[e("input",{staticClass:"dokan-btn dokan-btn-danger dokan-btn-theme",attrs:{type:"submit",name:"update_shipping_settings"},domProps:{value:t.__("Save Settings","dokan")}})])])])])])}),[],!1,null,null,null).exports;let s=dokan_get_lib("Vue"),i=dokan_get_lib("Router");s.use(i);const d=new i({routes:[{path:"/",component:o,name:"Main"},{path:"/settings",component:a,name:"Settings"},{path:"/zone/:zoneID",component:n,name:"Zone"}]});new(dokan_get_lib("Vue"))({el:"#dokan-vue-shipping",router:d,render:t=>t(e),created(){dokan.dokan_pro_i18n&&this.setLocaleData(dokan.dokan_pro_i18n.dokan)}})})();