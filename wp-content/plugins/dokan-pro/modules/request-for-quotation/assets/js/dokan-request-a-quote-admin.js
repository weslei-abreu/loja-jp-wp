(()=>{"use strict";function e(e,t,s,o,a,r,i,n){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),o&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=l):a&&(l=n?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:d}}const t=e({name:"Tabs",methods:{test(){console.log(this.$route.path)}}},(function(){var e=this,t=e._self._c;return t("h2",{staticClass:"nav-tab-wrapper woo-nav-tab-wrapper"},[t("router-link",{class:["nav-tab",{"nav-tab-active":"/request-for-quote"===e.$route.path}],attrs:{to:{name:"RequestAQuote"}}},[e._v("\n        "+e._s(e.__("Quotes List","dokan"))+"\n    ")]),e._v(" "),t("router-link",{class:["nav-tab",{"nav-tab-active":"/request-for-quote/quote-rules"===e.$route.path}],attrs:{to:{name:"RequestAQuoteRules"}}},[e._v("\n        "+e._s(e.__("Quote Rules","dokan"))+"\n    ")])],1)}),[],!1,null,null,null).exports,s="request-for-quote",o=dokan_get_lib("debounce"),a=e({name:"RequestAQuote",components:{Tabs:t,ListTable:dokan_get_lib("ListTable"),Multiselect:dokan_get_lib("Multiselect"),DateRangePicker:dokan_get_lib("DateRangePicker")},data(){return{requests:[],customers:[],dateRange:{from_date:"",to_date:""},loading:!1,counts:{all:0,publish:0,approve:0,reject:0,cancel:0,expired:0,draft:0,future:0,pending:0,converted:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,actionColumn:"sl",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}],selected_date:"all",selected_customer:"",customer_info:{name_field:"",email_field:"",customer_id:"",phone_field:""}}},filters:{date:e=>e?moment(e).format("MMMM D, YYYY"):""},watch:{"$route.query.status"(){this.fetchAll()},"$route.query.page"(){this.fetchAll()}},computed:{currentStatus(){return this.$route.query.status||"all"},currentPage(){let e=this.$route.query.page||1;return parseInt(e)},bulkActions(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:dokan?.request_quote?.status_list},checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr",statusList(){const e=[{key:"pending",label:this.__("Pending","dokan")},{key:"approve",label:this.__("Approved","dokan")},{key:"updated",label:this.__("Updated","dokan")},{key:"accepted",label:this.__("Accepted","dokan")},{key:"expired",label:this.__("Expired","dokan")},{key:"reject",label:this.__("Rejected","dokan")},{key:"cancel",label:this.__("Cancelled","dokan")},{key:"converted",label:this.__("Converted","dokan")},{key:"draft",label:this.__("Draft","dokan")},{key:"trash",label:this.__("Trash","dokan")}];return dokan.hooks.applyFilters("dokan_rfq_admin_status_list",e,this.counts)},columns(){let e={sl:{label:this.__("Quote #","dokan")},customer_name:{label:this.__("Customer","dokan")},status:{label:this.__("Status","dokan")},store_name:{label:this.__("Vendor","dokan")},created_at:{label:this.__("Date","dokan")}};return dokan.hooks.applyFilters("dokan_rfq_admin_column_list",e)}},methods:{updatedCounts(e){this.counts.all=parseInt(e.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(e.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(e.getResponseHeader("X-Status-Draft")),this.counts.updated=parseInt(e.getResponseHeader("X-Status-Updated")),this.counts.accepted=parseInt(e.getResponseHeader("X-Status-Accepted")),this.counts.expired=parseInt(e.getResponseHeader("X-Status-Expired")),this.counts.reject=parseInt(e.getResponseHeader("X-Status-Rejected")),this.counts.cancel=parseInt(e.getResponseHeader("X-Status-Cancelled")),this.counts.pending=parseInt(e.getResponseHeader("X-Status-Pending")),this.counts.future=parseInt(e.getResponseHeader("X-Status-Future")),this.counts.converted=parseInt(e.getResponseHeader("X-Status-Converted")),this.counts.approve=parseInt(e.getResponseHeader("X-Status-Approved")),this.counts.trash=parseInt(e.getResponseHeader("X-Status-Trash"))},updatePagination(e){this.totalPages=parseInt(e.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(e.getResponseHeader("X-WP-Total"))},fetchAll(){this.loading=!0;const e={per_page:this.perPage,page:this.currentPage,date:this.dateRange,status:this.currentStatus,customer:this.selected_customer?.name};dokan.api.get("/"+s,e).done(((e,t,s)=>{this.requests=e,this.loading=!1,this.updatedCounts(s),this.updatePagination(s)}))},moment:e=>moment(e),editUrl:e=>dokan.urls.adminRoot+"admin.php?page=dokan#/"+s+"/"+e+"/edit",goToPage(e){this.$router.push({name:"RequestAQuote",query:{status:this.currentStatus,page:e}})},rowAction(e,t){if(t.row.id){if("trash"===e||"delete"===e){this.loading=!0;var o="delete"===e?"?force=true":"";dokan.api.delete("/"+s+"/"+t.row.id+o).done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))}"restore"===e&&(this.loading=!0,dokan.api.put("/"+s+"/"+t.row.id+"/restore").done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)})))}else alert(this.__("No data found","dokan"))},onBulkAction(e,t){const o={action:e,items:t};dokan.api.put("/"+s+"/batch",o).done((e=>{this.fetchAll(),this.loading=!1})).error((e=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))},asyncCustomerFind:o((function(e=""){this.isLoading=!0,e.length<1||(this.customers=_.map(this.requests,(function(e){return{id:e.id,name:e.customer_name}})).filter(((e,t,s)=>t===s.findIndex((t=>t.name===e.name)))))}),300),onSelectCustomer(e){this.customer_info={customer_id:e?.id,name_field:e?.name}},filterQuoteList(){this.fetchAll()},clearFilterQuote(){this.selected_customer=0,this.fetchAll()},datePickerFormat(){return this.dateTimePickerFormat?this.dateTimePickerFormat():{format:dokan_get_daterange_picker_format().toLowerCase(),separator:" - ",applyLabel:this.__("Apply","dokan"),cancelLabel:this.__("Clear","dokan")}},dateRangeUpdated(){this.dateRange.from_date=moment(this.dateRange.startDate).format("YYYY-MM-DD"),this.dateRange.to_date=moment(this.dateRange.endDate).format("YYYY-MM-DD")},clearDateRange(){this.dateRange.from_date="",this.dateRange.to_date="",this.$refs.picker.togglePicker(!1)}},created(){this.fetchAll()}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dokan-quote-wrapper"},[t("tabs"),e._v(" "),t("br"),e._v(" "),t("h1",{staticClass:"wp-heading-inline"},[e._v(e._s(e.__("Quotes","dokan")))]),e._v(" "),t("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewRequestQuote"}}},[e._v(e._s(e.__("New Quote","dokan")))]),e._v(" "),t("hr",{staticClass:"wp-header-end"}),e._v(" "),t("ul",{staticClass:"subsubsub"},[t("li",[t("router-link",{attrs:{to:{name:"RequestAQuote"},"active-class":"current",exact:""}},[e._v(e._s(e.__("All","dokan"))+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts.all))])]),t("span",{staticClass:"pipe"},[e._v("|")])],1),e._v(" "),e._l(e.statusList,(function(s,o){return t("li",{key:s.key},[t("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:s.key}},"active-class":"current",exact:""}},[e._v("\n                "+e._s(s.label)+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts[s.key])+" ")])]),e._v(" "),o<e.statusList.length-1?t("span",{staticClass:"pipe"},[e._v("|")]):e._e()],1)}))],2),e._v(" "),t("list-table",{attrs:{columns:e.columns,rows:e.requests,loading:e.loading,"action-column":e.actionColumn,actions:e.actions,"show-cb":e.showCb,"bulk-actions":e.bulkActions,"not-found":e.notFound,"total-pages":e.totalPages,"total-items":e.totalItems,"per-page":e.perPage,"current-page":e.currentPage,text:e.$root.listTableTexts()},on:{pagination:e.goToPage,"bulk:click":e.onBulkAction},scopedSlots:e._u([{key:"sl",fn:function(s){return["trash"===s.row.status?t("strong",[e._v(e._s(e.__("Quote","dokan")+" "+s.row.id))]):t("strong",[t("a",{attrs:{href:e.editUrl(s.row.id)}},[e._v(e._s(e.__("Quote","dokan")+" "+s.row.id))])])]}},{key:"title",fn:function(s){return[t("strong",[e._v(e._s(s.row.title))])]}},{key:"status",fn:function(s){return[t("span",{class:s.row.status},[e._v("\n                "+e._s(e.statusList.find((e=>e.key===s.row.status))?.label)+"\n            ")])]}},{key:"created_at",fn:function(t){return[e._v("\n            "+e._s(t.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(s){return[e._l(e.actions,(function(o,a){return"converted"!==s.row.status?["edit"===o.key?t("span",{class:o.key},[t("a",{attrs:{href:e.editUrl(s.row.id)}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e(),e._v(" "),"trash"===o.key&&"trash"!==e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))])]):e._e(),e._v(" "),"delete"===o.key&&"trash"===e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e(),e._v(" "),"restore"===o.key&&"trash"===e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e()]:e._e()}))]}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),t("template",{slot:"filters"},[t("div",{attrs:{id:"rfq-filters"}},[t("date-range-picker",{ref:"picker",staticClass:"mr-2",attrs:{"locale-data":e.datePickerFormat(),singleDatePicker:!1,timePicker:!1,timePicker24Hour:!1,showWeekNumbers:!1,showDropdowns:!1,autoApply:!1,linkedCalendars:!0,opens:"center"},on:{update:e.dateRangeUpdated},scopedSlots:e._u([{key:"input",fn:function(s){return[e.dateRange.from_date?t("span",[e._v(e._s(e._f("date")(e.dateRange.from_date))+" - "+e._s(e._f("date")(e.dateRange.to_date)))]):e._e(),e._v(" "),e.dateRange.from_date?e._e():t("span",{staticClass:"date-range-placeholder"},[e._v(e._s(e.__("Filter by date","dokan")))])]}},{key:"footer",fn:function(s){return t("div",{staticClass:"drp-buttons"},[t("span",{staticClass:"drp-selected"},[e._v(e._s(s.rangeText))]),e._v(" "),t("button",{staticClass:"cancelBtn btn btn-sm btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.clearDateRange()}}},[e._v(e._s(e.__("Clear","dokan")))]),e._v(" "),s.in_selection?e._e():t("button",{staticClass:"applyBtn btn btn-sm btn-success",attrs:{type:"button"},on:{click:s.clickApply}},[e._v(e._s(e.__("Apply","dokan")))])])}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),e._v(" "),t("div",{attrs:{id:"rfq-filter-queries"}},[t("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",autocomplete:"off","read-only":!0,searchable:!0,options:e.customers,"hide-selected":!0,"open-direction":"bottom","clear-on-select":!0,"close-on-select":!0,showLabels:!1,placeholder:e.__("Filter by customer","dokan")},on:{select:e.onSelectCustomer,"search-change":e.asyncCustomerFind},model:{value:e.selected_customer,callback:function(t){e.selected_customer=t},expression:"selected_customer"}})],1),e._v(" "),t("div",{staticClass:"filter-buttons"},[e.selected_customer?t("button",{staticClass:"button ml-2",attrs:{type:"button"},on:{click:e.clearFilterQuote}},[e._v("Ã—")]):e._e(),e._v(" "),t("button",{staticClass:"button",on:{click:e.filterQuoteList}},[e._v("\n                        "+e._s(e.__("Filter","dokan"))+"\n                    ")])])],1)])],2)],1)}),[],!1,null,null,null).exports,r=dokan_get_lib("ListTable"),i="request-for-quote/quote-rule",n=dokan_get_lib("moment"),l=e({name:"RequestAQuoteRules",components:{ListTable:r,Tabs:t},data(){return{requests:[],loading:!1,status:{publish:this.__("Published","dokan"),draft:this.__("Draft","dokan"),trash:this.__("Trash","dokan")},counts:{all:0,publish:0,draft:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,columns:{rule_name:{label:this.__("Rules","dokan")},status:{label:this.__("Status","dokan")},hide_price:{label:this.__("Hidden Price","dokan")},rule_priority:{label:this.__("Priority","dokan")},created_at:{label:this.__("Date","dokan")}},actionColumn:"rule_name",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]}},watch:{"$route.query.status"(){this.fetchAll()},"$route.query.page"(){this.fetchAll()}},computed:{currentStatus(){return this.$route.query.status||"all"},currentPage(){let e=this.$route.query.page||1;return parseInt(e)},bulkActions(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:[{key:"trash",label:this.__("Move to Trash","dokan")}]},checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"},methods:{updatedCounts(e){this.counts.all=parseInt(e.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(e.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(e.getResponseHeader("X-Status-Draft")),this.counts.trash=parseInt(e.getResponseHeader("X-Status-Trash"))},updatePagination(e){this.totalPages=parseInt(e.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(e.getResponseHeader("X-WP-Total"))},fetchAll(){this.loading=!0;const e={per_page:this.perPage,page:this.currentPage,status:this.currentStatus};dokan.api.get("/"+i,e).done(((e,t,s)=>{this.requests=e,this.loading=!1,this.updatedCounts(s),this.updatePagination(s)}))},moment:e=>n(e),editUrl:e=>dokan.urls.adminRoot+"admin.php?page=dokan#/"+i+"/"+e+"/edit",goToPage(e){this.$router.push({name:"RequestAQuoteRules",query:{status:this.currentStatus,page:e}})},rowAction(e,t){if(t.row.id){if("trash"===e||"delete"===e){this.loading=!0;var s="delete"===e?"?force=true":"";dokan.api.delete("/"+i+"/"+t.row.id+s).done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))}"restore"===e&&(this.loading=!0,dokan.api.put("/"+i+"/"+t.row.id+"/restore").done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)})))}else alert(this.__("No data found","dokan"))},onBulkAction(e,t){if("trash"===e){this.loading=!0;let e={};e.trash=t,dokan.api.put("/"+i+"/batch",e).done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))}if("delete"===e){this.loading=!0;let e={};e.delete=t,dokan.api.put("/"+i+"/batch",e).done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))}if("restore"===e){this.loading=!0;let e={};e.restore=t,dokan.api.put("/"+i+"/batch",e).done(((e,t,s)=>{this.fetchAll(),this.loading=!1})).error(((e,t,s)=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))}}},created(){this.fetchAll()}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dokan-announcement-wrapper"},[t("tabs"),e._v(" "),t("br"),e._v(" "),t("h1",{staticClass:"wp-heading-inline"},[e._v(e._s(e.__("Quote Rules","dokan")))]),e._v(" "),t("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewQuoteRules"}}},[e._v(e._s(e.__("New Quote Rules","dokan")))]),e._v(" "),t("hr",{staticClass:"wp-header-end"}),e._v(" "),t("ul",{staticClass:"subsubsub"},[t("li",[t("router-link",{attrs:{to:{name:"RequestAQuoteRules"},"active-class":"current",exact:""}},[e._v(e._s(e.__("All","dokan"))+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts.all))])]),e._v(" | ")],1),e._v(" "),t("li",[t("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"publish"}},"active-class":"current",exact:""}},[e._v(e._s(e.__("Published","dokan"))+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts.publish))])]),e._v(" | ")],1),e._v(" "),t("li",[t("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"draft"}},"active-class":"current",exact:""}},[e._v(e._s(e.__("Draft","dokan"))+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts.draft))])]),e._v(" | ")],1),e._v(" "),t("li",[t("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"trash"}},"active-class":"current",exact:""}},[e._v(e._s(e.__("Trash","dokan"))+" "),t("span",{staticClass:"count"},[e._v(e._s(e.counts.trash))])])],1)]),e._v(" "),t("list-table",{attrs:{columns:e.columns,rows:e.requests,loading:e.loading,"action-column":e.actionColumn,actions:e.actions,"show-cb":e.showCb,"bulk-actions":e.bulkActions,"not-found":e.notFound,"total-pages":e.totalPages,"total-items":e.totalItems,"per-page":e.perPage,"current-page":e.currentPage,text:e.$root.listTableTexts()},on:{pagination:e.goToPage,"bulk:click":e.onBulkAction},scopedSlots:e._u([{key:"rule_name",fn:function(s){return["trash"===s.row.status?t("strong",[e._v(e._s(s.row.rule_name))]):t("strong",[t("a",{attrs:{href:e.editUrl(s.row.id)}},[e._v(e._s(s.row.rule_name))])])]}},{key:"status",fn:function(s){return[t("span",{class:s.row.status},[e._v(e._s(e.status[s.row.status]))])]}},{key:"created_at",fn:function(t){return[e._v("\n            "+e._s(t.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(s){return[e._l(e.actions,(function(o,a){return["edit"===o.key?t("span",{class:o.key},[t("a",{attrs:{href:e.editUrl(s.row.id)}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e(),e._v(" "),"trash"===o.key&&"trash"!==e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))])]):e._e(),e._v(" "),"delete"===o.key&&"trash"===e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e(),e._v(" "),"restore"===o.key&&"trash"===e.currentStatus?t("span",{class:o.key},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.rowAction(o.key,s)}}},[e._v(e._s(o.label))]),e._v(" "),a!==e.actions.length-1?[e._v(" | ")]:e._e()],2):e._e()]}))]}}])})],1)}),[],!1,null,null,null).exports,d=dokan_get_lib("TextEditor"),u=dokan_get_lib("Modal"),c=dokan_get_lib("Postbox"),p=dokan_get_lib("Multiselect"),h=dokan_get_lib("debounce"),m="request-for-quote",f=dokan_get_lib("Datepicker"),v=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1}),g={PENDING:"pending",UPDATED:"updated",REJECTED:"reject",APPROVED:"approve",ACCEPTED:"accepted",CONVERTED:"converted"},b=e({name:"NewRequestQuote",components:{Tabs:t,Postbox:c,TextEditor:d,Modal:u,Multiselect:p,Debounce:h,Datepicker:f},data(){return{QUOTE_STATUS:g,quoteId:"",loading:!1,showModal:!1,createStatus:g.PENDING,showProductTable:!1,requested_table_products:[],responcedProduct:[],requested_products:[],customers:[],countries:[],stateList:[],stores:[],pageTitle:this.__("Add New Quote","dokan"),display_converter:!1,quote:{vendor:"",country:"",state_name:"",quote_title:"",status:g.PENDING,customer_info:{name_field:"",email_field:"",company_field:"",phone_field:"",country:"",city:"",post_code:"",addr_line_1:"",addr_line_2:"",state_address:"",customer_additional_msg:"",user_avatar:""},store_info:{store_id:"",store_name:"",user_avatar:"",vendor_additional_msg:""},user_id:"",product_ids:[],offer_price:[],offer_product_quantity:[],expiry_days:0,enable_expiry_date:!1,formatted_expiry_date:"",converted_by:"",shipping_cost:0,expected_delivery_date:"",order_url:""},product_quantity:1,product_id:"",columns:{thumbnail:{label:this.__("Thumbnail","dokan")},item:{label:this.__("Item","dokan")},cost:{label:this.__("Cost","dokan")},off_price:{label:this.__("Off. Price","dokan")},qty:{label:this.__("Qty","dokan")},off_subtotal:{label:this.__("Off. Subtotal","dokan")}},loadSpinner:!1,errorMessage:[],productErrorMessage:[],isLoading:!1,quoteUpdated:!1,initialTotal:0,draftBtnLabel:this.__("Save as Draft","dokan"),reOpenBtnLabel:this.__("Re-Open","dokan"),rejectBtnLabel:this.__("Reject","dokan"),publishBtnLabel:this.__("Create","dokan"),addStoresBtnLabel:this.__("Add store","dokan"),viewQuoteLinkBtnLabel:this.__("View Order","dokan"),addProductBtnLabel:this.__("Add product(s)","dokan"),updateOrderBtnLabel:this.__("Update Quote","dokan"),approveOrderBtnLabel:this.__("Approve Quote","dokan"),addOrderBtnLabel:this.__("Convert to Order","dokan"),addProductToQuoteBtnLabel:this.__("Add to quote","dokan")}},computed:{total:function(){return this.updatedTotal()},submitBtnLabel(){return this.statusesLabel[this.quote.status]},checkRtl:()=>1===isRtl&&void 0!==isRtl?"lang_rtl":"",checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr",quoteNoticeClass(){switch(this.quote.status){case"cancel":return"cancel-notice";case"accepted":return"accepted-notice";case"updated":return"update-notice";case"reject":return"rejected-notice";case"pending":return this.quote.enable_expiry_date&&this.quote.expiry_days>0?"pending-notice":"";case"approve":return this.quote.expiry_days>0?"approved-notice":"";case"expired":return this.quote.expiry_days>0?"expired-notice":"";case"converted":return this.quote.converted_by?"converted-notice":"";default:return""}},quoteNoticeText(){const{status:e,expiry_days:t,formatted_expiry_date:s,converted_by:o}=this.quote;switch(e){case"cancel":return this.__("The Quote is Cancelled by the Customer.","dokan");case"accepted":return t>0?this.sprintf(this.__("The Quote is Accepted by the Customer. Please convert it before the quote expires on %s.","dokan"),`<strong>${s}</strong>`):this.__("The Quote is Accepted by the Customer","dokan");case"updated":return this.__("The Quote has been Updated by the vendor. See below.","dokan");case"reject":return this.__("The Vendor has Rejected the Quotation. Send a New Quote.","dokan");case"pending":return t>0?this.sprintf(this.__("Please be Aware that the Quote Will Expire After %s from the Approval.","dokan"),`<strong>${1===t?`${t} day`:`${t} days`}</strong>`):"";case"approve":return t>0?this.sprintf(this.__("The quote will expire on %s.","dokan"),`<strong>${s}</strong>`):"";case"expired":return t>0?this.sprintf(this.__("The quote expired after %s.","dokan"),`<strong>${s}</strong>`):"";case"converted":return o?this.sprintf(this.__("The Quote Has been Converted to an Order%s.","dokan"),this.display_converter?this.sprintf(this.__(" By %s","dokan"),o):""):"";default:return""}},isQuoteEditable(){return[g.ACCEPTED,g.UPDATED,g.APPROVED].includes(this.quote.status)}},watch:{total(e,t){e!==this.initialTotal&&this.$route.params.id&&"pending"===this.quote.status?this.quoteUpdated=!0:this.quoteUpdated=!1}},methods:{formatMoney:e=>accounting.formatMoney(e,dokan.currency),updatePrice:h((function(e,t=0){const{id:s,value:o}=e.target,a=accounting.unformat(o,dokan.currency.decimal);if(!isNaN(parseFloat(a))||""===o||"."===o)switch(s){case"offer_price":this.$set(this.quote.offer_price,t,a);break;case"offer_shipping_cost":this.quote.shipping_cost=a}}),500),hideModal(){this.showModal=!1},openModal(){this.product_id="",this.product_quantity=1,this.showModal=!0},searchProducts:h((function(e=""){let t=this;e.length<1||(this.isLoading=!0,dokan.api.get("/products",{search:e,request_a_quote:1}).done((e=>{t.responcedProduct=e;const s=e.filter((e=>parseInt(e.store.id)===parseInt(t.quote.vendor.id)));t.requested_products=s.map((function(e){return{product_id:e.id,product_title:e.name}}))})).always((()=>{t.isLoading=!1})).fail((e=>{t.requested_products=[{product_id:0,product_title:t.__("No product found","dokan")}];let s=dokan_handle_ajax_error(e);s&&t.showAlert(s,"","error")})))}),300),addProductToQuote(){if(!this.product_id)return;let e=this.product_id.product_id,t=this.product_quantity,s=[...this.requested_table_products],o=[...this.quote.product_ids],a=[...this.quote.offer_price],r=[...this.quote.offer_product_quantity];_.map(this.responcedProduct,(function(i,n){if(i.id===e&&i.price>=1&&t>=1)return o.push(i.id),a.push(i.price),r.push(t),s.push(i)})),this.requested_table_products=s,this.quote.product_ids=o,this.quote.offer_price=a,this.quote.offer_product_quantity=r,this.showProductTable=!0,this.hideModal()},removeFromQuote(e){this.requested_table_products.splice(e,1),this.quote.product_ids.splice(e,1),this.quote.offer_price.splice(e,1),this.quote.offer_product_quantity.splice(e,1),this.requested_table_products.length<=0&&(this.showProductTable=!1,this.quote.offer_price=[],this.quote.offer_product_quantity=[])},asyncCustomerFind:h((function(e=""){this.isLoading=!0,e.length<1||dokan.api.get("/request-for-quote/customers",{search:e}).done((e=>{this.isLoading=!1,this.customers=_.map(e,(function(e){return{id:e.id,name:e.username+"( "+e.email+" )",email:e.email,username:e.username,billing:e.billing}}))}))}),300),asyncCountriesFind:h((function(){this.isLoading=!0,this.countries=this.getCountries(),this.isLoading=!1}),300),asyncStatesFind:h((function(){"undefined"!==this.quote.country.code&&this.quote.country.code&&(this.isLoading=!0,this.stateList=this.getStates(),this.isLoading=!1)}),300),asyncStoreFind:h((function(e=""){this.isLoading=!0,e.length<1||dokan.api.get("/stores",{search:e}).done((e=>{this.isLoading=!1,this.requested_products=[];let t=this.quote.store_info;this.stores=_.map(e,(function(e){return t={store_id:e.id,store_name:e.store_name},{id:e.id,name:e.store_name}})),this.quote.store_info=t}))}),300),onSelectCustomer(e){this.quote.customer_info={...this.quote.customer_info,customer_id:e?.id,email_field:e?.email,name_field:e?.username,phone_field:e?.billing?.phone,country:e?.billing?.country,city:e?.billing?.city,post_code:e?.billing?.postcode,addr_line_1:e?.billing?.address_1,addr_line_2:e?.billing?.address_2,state_address:e?.billing?.state},this.countries=[{code:e?.billing?.country,name:dokan.countries?.[e?.billing?.country]}],this.quote.country=this.countries,this.stateList=[{code:e?.billing?.state,name:dokan.states?.[e?.billing?.country]?.[e?.billing?.state]}],this.quote.state_name=this.stateList},onSelectStore(){this.quote.product_ids=[],this.requested_products=[]},onSelectCountries(e){this.quote.customer_info={...this.quote.customer_info,country:e?.code},this.stateList=[],this.quote.state_name="",this.quote.customer_info.state_address=""},onSelectStates(e){this.quote.customer_info={...this.quote.customer_info,state_address:e?.code}},getCountries(){const e=[];return Object.entries(dokan.countries).forEach((([t,s])=>e.push({code:t,name:s}))),e},getStates(){const e=[];return Object.entries(dokan.states?.[this.quote.country.code]).forEach((([t,s])=>e.push({code:t,name:s}))),e},filterUndefined:e=>e.filter((e=>void 0!==e)),clearAll(){this.quote.user_id=""},createRequestAQuote(e){this.$route.params.id?this.updateRequestAQuote(e):this.saveQuoteRequest(e)},saveQuoteRequest(e){this.loadSpinner=!0;let t=jQuery.extend({},this.quote);if(t.offer_price=this.filterUndefined([...t.offer_price]),t.offer_product_quantity=this.filterUndefined([...t.offer_product_quantity]),t.user_id=this.quote.user_id.id,t.status=e,!this.validateFormFields(t))return this.loadSpinner=!1,!1;t.shipping_cost=parseFloat(t.shipping_cost),dokan.api.post("/"+m,t).done((e=>{this.loadSpinner=!1,this.sendToPages()})).error((e=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))},updateRequestAQuote(e){let t=this.$route.params.id;this.loadSpinner=!0;let s=jQuery.extend({},this.quote);if(s.product_ids=this.filterUndefined([...s.product_ids]),s.offer_price=this.filterUndefined([...s.offer_price]),s.offer_product_quantity=this.filterUndefined([...s.offer_product_quantity]),Array.isArray(this.quote.user_id)?s.user_id=this.quote.user_id[0].id:s.user_id=this.quote.user_id.id,s.status=e,s.id=t,!this.validateFormFields(s))return this.loadSpinner=!1,!1;dokan.api.put("/"+m+"/"+t,s).done((e=>{this.loadSpinner=!1,this.sendToPages()})).error((e=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))},rejectQuote(){v.fire({icon:"warning",text:this.__("Are you sure want to Reject the deal?","dokan"),showCloseButton:!0,showCancelButton:!0,confirmButtonText:this.__("OK","dokan"),cancelButtonText:this.__("Cancel","dokan")}).then((e=>{e.isConfirmed&&this.createRequestAQuote("reject")}))},redirectToOrder(){window.open(this.quote.order_url,"_blank")},validateFormFields(e){let t=!0;if(this.errorMessage=[],this.productErrorMessage=[],""===e.quote_title&&(this.errorMessage.push(this.__("Quote Title is required.","dokan")),t=!1),""!==e.user_id&&void 0!==e.user_id||(this.errorMessage.push(this.__("Customer is required.","dokan")),t=!1),""===e.vendor)this.productErrorMessage.push(this.__("Store selection is required. Please select at least one store.","dokan")),t=!1;else{if(e.product_ids.length<=0)this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),t=!1;else for(let s=0;s<e.product_ids.length;s++)""!==e.product_ids[s]&&void 0!==e.product_ids[s]||(this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),t=!1);if(e.offer_price.length<=0)this.productErrorMessage.push(this.__("Please select at least one price.","dokan")),t=!1;else for(let s=0;s<e.offer_price.length;s++)""!==e.offer_price[s]&&0!=e.offer_price[s]||(this.productErrorMessage.push(this.__("Offer price can't be zero.","dokan")),t=!1);if(e.offer_product_quantity.length<=0)this.productErrorMessage.push(this.__("Please add at least one offer product quantity.","dokan")),t=!1;else for(let s=0;s<e.offer_product_quantity.length;s++)""!==e.offer_product_quantity[s]&&0!=e.offer_product_quantity[s]||(this.productErrorMessage.push(this.__("Offer product quantity can't be zero.","dokan")),t=!1)}return t},validatePhoneInput(e){this.quote.customer_info.phone_field=this.quote.customer_info.phone_field.replace(/[^0-9\\.\-\_\(\)\+]+/g,"")},sendToPages(){this.$router.push({name:"RequestAQuote"})},updatedTotal(){let e=0;return this.quote.offer_price.forEach(((t,s)=>{0<t&&(e+=parseFloat(t)*parseFloat(this.quote.offer_product_quantity[s]))})),e+=parseFloat(this.quote.shipping_cost),e},fetchAQuote(e){this.loading=!0,dokan.api.get("/"+m+"/"+e).done((e=>{this.quote.quote_title=e.title,this.quote.vendor={id:e?.store_info?.store_id,name:e?.store_info?.store_name},this.quote.status=e.status,this.quote.converted_by=e.converted_by,this.quote.shipping_cost=e.shipping_cost,this.display_converter=e.show_converter,this.quote.store_info=e?.store_info,0!=e.customer_info&&(this.quote.customer_info=e.customer_info?e.customer_info:{},this.customers=[{id:e.customer.user_id,name:e.customer.user_login+"( "+e.customer.user_email+" )"}],this.quote.user_id=this.customers,this.countries=[{code:e.customer_info.country,name:dokan.countries?.[e.customer_info.country]}],this.quote.country=this.countries,this.stateList=[{code:e.customer_info.state_address,name:dokan.states?.[e.customer_info.country]?.[e.customer_info.state_address]}],this.quote.state_name=this.stateList,this.quote.customer_info.user_avatar=e?.customer?.user_avatar),this.requested_table_products=e.products,e.enable_expiry_date&&(this.quote.expiry_days=e?.expiry_days,this.quote.enable_expiry_date=e?.enable_expiry_date,this.quote.formatted_expiry_date=e?.expiry_formatted_date),void 0!==e.order_url&&e.order_url&&(this.quote.order_url=e.order_url),void 0!==e.expected_date&&e.expected_date&&(this.quote.expected_delivery_date=e.expected_date);let t=[],s=[],o=[];_.map(e.products,(function(e,a){t.push(e.id),s[a]=e.offer_price,o[a]=e.offer_product_quantity})),this.pageTitle=this.__("Edit Quote","dokan"),this.quote.product_ids=t,this.quote.offer_price=s,this.quote.offer_product_quantity=o,this.initialTotal=this.updatedTotal(),this.loading=!1,this.showProductTable=!0}))},updateQuote(e,t){dokan.api.post("/"+m+"/convert-to-order",{quote_id:e,status:t}).done((e=>{this.loadSpinner=!1,this.sendToPages()})).fail((e=>{this.loadSpinner=!1,alert(e.responseJSON.message)}))},showAlert(e,t,s){v.fire(e,t,s)}},created(){this.$route.params.id&&(this.quoteId=this.$route.params.id,this.fetchAQuote(this.$route.params.id))}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dokan-announcement-form-wrapper"},[t("tabs"),e._v(" "),t("h1",{staticClass:"wp-heading-inline"},[e._v(e._s(e.pageTitle))]),e._v(" "),t("a",{staticClass:"page-title-action",on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.__("Go Back","dokan")))]),e._v(" "),t("hr",{staticClass:"wp-header-end"}),e._v(" "),t("div",{attrs:{id:"dokan-quote-notice"}},[e.quoteNoticeClass?t("div",{class:"quote-notice "+e.quoteNoticeClass},[t("span",{domProps:{innerHTML:e._s(e.quoteNoticeText)}})]):e._e()]),e._v(" "),t("form",{attrs:{action:"",method:"post",id:"post"}},[t("div",{attrs:{id:"poststuff"}},[t("div",{staticClass:"metabox-holder flex sm:flex-col md:flex-row gap-5",attrs:{id:"post-body"}},[t("div",{staticClass:"md:w-[80%]"},[t("div",{staticClass:"!mb-0 post-body-content",class:e.checkRtl},[t("div",{attrs:{id:"titlediv"}},[t("div",{attrs:{id:"titlewrap"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.quote_title,expression:"quote.quote_title"}],attrs:{type:"text",name:"post_title",size:"30",id:"title",autocomplete:"off",placeholder:e.__("Enter quote title","dokan"),required:"required"},domProps:{value:e.quote.quote_title},on:{input:function(t){t.target.composing||e.$set(e.quote,"quote_title",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"inside"})]),e._v(" "),t("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[t("postbox",{attrs:{title:e.__("Customer Information","dokan"),extraClass:"request-quote-settings"}},[e._l(e.errorMessage,(function(s){return e.errorMessage.length>0?t("ul",{staticClass:"error-message"},[t("li",[e._v(e._s(s))])]):e._e()})),e._v(" "),t("table",{staticClass:"form-table announcement-meta-options"},[t("tbody",[t("tr",[t("th",[e._v(e._s(e.__("Quote user","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{autocomplete:"off",showNoOptions:!1,id:"ajax",label:"name","track-by":"id",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.customers,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{select:e.onSelectCustomer,"search-change":e.asyncCustomerFind},model:{value:e.quote.user_id,callback:function(t){e.$set(e.quote,"user_id",t)},expression:"quote.user_id"}})],1)]),e._v(" "),t("tr",[t("th",[e._v("\n                                            "+e._s(e.__("Full Name","dokan"))+"\n                                        ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.name_field,expression:"quote.customer_info.name_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"text",size:"50",placeholder:e.__("Full Name","dokan"),name:"name_field",required:"required"},domProps:{value:e.quote.customer_info.name_field},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"name_field",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                            "+e._s(e.__("Email","dokan"))+"\n                                        ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.email_field,expression:"quote.customer_info.email_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"email",size:"50",placeholder:e.__("Email","dokan"),name:"email_field",required:"required"},domProps:{value:e.quote.customer_info.email_field},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"email_field",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                            "+e._s(e.__("Company Name","dokan"))+"\n                                        ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.company_field,expression:"quote.customer_info.company_field"}],attrs:{type:"text",size:"50",placeholder:e.__("Company Name","dokan"),name:"company_field"},domProps:{value:e.quote.customer_info.company_field},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"company_field",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                            "+e._s(e.__("Phone Number","dokan"))+"\n                                        ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.phone_field,expression:"quote.customer_info.phone_field"}],attrs:{type:"text",size:"50",placeholder:e.__("Phone Number","dokan"),name:"phone_field"},domProps:{value:e.quote.customer_info.phone_field},on:{input:[function(t){t.target.composing||e.$set(e.quote.customer_info,"phone_field",t.target.value)},function(t){return t.preventDefault(),e.validatePhoneInput.apply(null,arguments)}]}})])])])])],2)],1),e._v(" "),t("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[t("postbox",{attrs:{title:e.__("Shipping Details","dokan"),extraClass:"request-quote-settings"}},[t("table",{staticClass:"form-table announcement-meta-options"},[t("tbody",[t("tr",[t("th",[e._v(e._s(e.__("Country","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{autocomplete:"off",showNoOptions:!1,id:"ajax",label:"name","track-by":"code",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.countries,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{select:e.onSelectCountries,"search-change":e.asyncCountriesFind},model:{value:e.quote.country,callback:function(t){e.$set(e.quote,"country",t)},expression:"quote.country"}})],1)]),e._v(" "),t("tr",[t("th",[e._v("\n                                                "+e._s(e.__("State","dokan"))+"\n                                            ")]),e._v(" "),t("td",[t("multiselect",{attrs:{autocomplete:"off",showNoOptions:!1,id:"ajax",label:"name","track-by":"code",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.stateList,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{select:e.onSelectStates,"search-change":e.asyncStatesFind},model:{value:e.quote.state_name,callback:function(t){e.$set(e.quote,"state_name",t)},expression:"quote.state_name"}})],1)]),e._v(" "),t("tr",[t("th",[e._v("\n                                                "+e._s(e.__("Postal Code","dokan"))+"\n                                            ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.post_code,expression:"quote.customer_info.post_code"}],attrs:{type:"text",size:"50",placeholder:e.__("ex - 12345","dokan"),name:"post_code"},domProps:{value:e.quote.customer_info.post_code},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"post_code",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                                "+e._s(e.__("Address Line 1","dokan"))+"\n                                            ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.addr_line_1,expression:"quote.customer_info.addr_line_1"}],attrs:{type:"text",size:"50",placeholder:e.__("Road, Area etc.","dokan"),name:"addr_line_1"},domProps:{value:e.quote.customer_info.addr_line_1},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"addr_line_1",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                                "+e._s(e.__("Address Line 2","dokan"))+"\n                                            ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.customer_info.addr_line_2,expression:"quote.customer_info.addr_line_2"}],attrs:{type:"text",size:"50",placeholder:e.__("Apartment, Suite etc.","dokan"),name:"addr_line_2"},domProps:{value:e.quote.customer_info.addr_line_2},on:{input:function(t){t.target.composing||e.$set(e.quote.customer_info,"addr_line_2",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v("\n                                                "+e._s(e.__("Expected Delivery","dokan"))+"\n                                            ")]),e._v(" "),t("td",[t("Datepicker",{attrs:{type:"text",size:"50",format:"yy-mm-dd",placeholder:e.__("Select Date","dokan"),name:"expected_delivery_date",startFromCurrentDate:!0},model:{value:e.quote.expected_delivery_date,callback:function(t){e.$set(e.quote,"expected_delivery_date",t)},expression:"quote.expected_delivery_date"}})],1)])])])])],1)]),e._v(" "),t("div",{staticClass:"postbox-container"},[t("postbox",{attrs:{title:e.__("Quote Details","dokan"),extraClass:"request-quote-settings"}},[e.productErrorMessage.length>0?t("div",e._l(e.productErrorMessage,(function(s){return t("ul",{staticClass:"error-message"},[t("li",[e._v(e._s(s))])])})),0):e._e(),e._v(" "),t("div",{attrs:{id:"select-vendor-store"}},[t("label",{attrs:{for:"ajax"}},[e._v(e._s(e.__("Select Vendor:","dokan")))]),e._v(" "),t("div",{staticClass:"vendor-selection-box"},[t("multiselect",{staticStyle:{width:"75%",float:"left"},attrs:{id:"ajax",label:"name","track-by":"id",options:e.stores,searchable:!0,autocomplete:"off","hide-selected":!0,showNoOptions:!1,"open-direction":"bottom","clear-on-select":!0,"close-on-select":!0,placeholder:e.__("Type to search","dokan")},on:{select:e.onSelectStore,"search-change":e.asyncStoreFind},model:{value:e.quote.vendor,callback:function(t){e.$set(e.quote,"vendor",t)},expression:"quote.vendor"}}),e._v(" "),e.showProductTable?t("span",{staticClass:"selection-field-layer"}):e._e()],1)]),e._v(" "),e.showProductTable?t("table",{staticClass:"form-table dokan-quote-product"},[t("thead",[t("tr",[e._l(e.columns,(function(s){return t("th",[e._v(e._s(s.label))])})),e._v(" "),t("th")],2)]),e._v(" "),t("tbody",[e._l(e.requested_table_products,(function(s,o){return t("tr",[t("td",[t("img",{staticClass:"attachment-thumbnail size-thumbnail",attrs:{width:"50",src:s.images[0].src,alt:s.name,loading:"lazy",title:s.name}})]),e._v(" "),t("td",[t("div",[t("a",{attrs:{href:s.permalink,target:"_blank"}},[e._v(e._s(s.name)+" ")])]),e._v(" "),t("div",[e._v("\n                                            "+e._s(e.__("Vendor: ","dokan"))+"\n                                        ")]),e._v(" "),t("div",[e._v("\n                                            "+e._s(s.store.name)+"\n                                        ")])]),e._v(" "),t("td",[e._v("\n                                        "+e._s(e.formatMoney(s.price))+"\n                                    ")]),e._v(" "),t("td",[t("span",{staticClass:"input-layer",staticStyle:{"margin-right":"30px"}},[t("input",{staticStyle:{width:"5em","min-height":"40px"},attrs:{type:"text",name:"offer_price",id:"offer_price",autocomplete:"off"},domProps:{value:e.formatMoney(e.quote.offer_price[o])},on:{input:function(t){return e.updatePrice(t,o)}}}),e._v(" "),e.isQuoteEditable?t("span",{staticClass:"selection-field-layer"}):e._e()])]),e._v(" "),t("td",[t("span",{staticClass:"input-layer",staticStyle:{"margin-right":"30px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.quote.offer_product_quantity[o],expression:"quote.offer_product_quantity[index]"}],staticStyle:{width:"5em","min-height":"40px"},attrs:{type:"number",name:"offer_product_quantity",min:"1",id:"offer_product_quantity",autocomplete:"off"},domProps:{value:e.quote.offer_product_quantity[o]},on:{input:function(t){t.target.composing||e.$set(e.quote.offer_product_quantity,o,t.target.value)}}}),e._v(" "),e.isQuoteEditable?t("span",{staticClass:"selection-field-layer"}):e._e()])]),e._v(" "),t("td",[e._v("\n                                        "+e._s(e.formatMoney(e.quote.offer_price[o]*e.quote.offer_product_quantity[o]))+"\n                                    ")]),e._v(" "),e.QUOTE_STATUS.CONVERTED!==e.quote.status?t("td",[t("a",{on:{click:function(t){return e.removeFromQuote(o)}}},[t("span",{staticClass:"dashicons dashicons-no",staticStyle:{color:"red",cursor:"pointer"}})])]):e._e()])})),e._v(" "),t("tr",[t("td",{attrs:{colspan:"5"}},[t("strong",{attrs:{id:"dokan-shipping-cost"}},[e._v(e._s(e.__("Shipping Cost: ","dokan")))])]),e._v(" "),t("td",{attrs:{colspan:"2"}},[t("span",{staticClass:"input-layer",staticStyle:{"margin-right":"30px"}},[t("input",{staticStyle:{width:"5em","min-height":"40px"},attrs:{type:"text",name:"shipping_cost",min:"0",id:"offer_shipping_cost",autocomplete:"off"},domProps:{value:e.formatMoney(e.quote.shipping_cost)},on:{input:function(t){return e.updatePrice(t)}}}),e._v(" "),e.isQuoteEditable?t("span",{staticClass:"selection-field-layer"}):e._e()])])])],2),e._v(" "),t("tfoot",[t("tr",[t("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"5"}},[e._v("\n                                        "+e._s(e.__("Subtotal (Standard)","dokan"))+"\n                                    ")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[e._v("\n                                        "+e._s(e.formatMoney(e.total))+"\n                                    ")])])])]):e._e(),e._v(" "),t("footer",[e.quote.vendor&&!e.isQuoteEditable&&e.quote.status!==e.QUOTE_STATUS.CONVERTED?t("input",{staticClass:"button button-default draft-btn",attrs:{type:"button",value:e.addProductBtnLabel,disabled:e.loadSpinner},on:{click:function(t){return t.preventDefault(),e.openModal()}}}):e._e(),e._v(" "),t("div",{staticClass:"quote-action-buttons",staticStyle:{float:"right",display:"flex",gap:"8px"}},[this.$route.params.id?e._e():t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.publishBtnLabel},on:{click:function(t){return t.preventDefault(),e.createRequestAQuote(e.createStatus)}}}),e._v(" "),e.quote.status===e.QUOTE_STATUS.REJECTED?t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.reOpenBtnLabel},on:{click:function(t){return t.preventDefault(),e.createRequestAQuote(e.createStatus)}}}):e._e(),e._v(" "),e.quote.status!==e.QUOTE_STATUS.CONVERTED&&e.quote.status!==e.QUOTE_STATUS.REJECTED&&""!==e.quoteId?t("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.rejectBtnLabel},on:{click:function(t){return t.preventDefault(),e.rejectQuote.apply(null,arguments)}}}):e._e(),e._v(" "),e.quote.status===e.QUOTE_STATUS.PENDING&&""!==e.quoteId?t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"button",value:e.quoteUpdated?e.updateOrderBtnLabel:e.approveOrderBtnLabel,disabled:e.loadSpinner},on:{click:function(t){return t.preventDefault(),e.createRequestAQuote(e.quoteUpdated?e.QUOTE_STATUS.UPDATED:e.QUOTE_STATUS.APPROVED)}}}):e._e(),e._v(" "),e.quote.status!==e.QUOTE_STATUS.APPROVED&&e.quote.status!==e.QUOTE_STATUS.ACCEPTED&&e.quote.status!==e.QUOTE_STATUS.UPDATED||""===e.quoteId?e._e():t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"button",value:e.addOrderBtnLabel,disabled:e.loadSpinner},on:{click:function(t){return t.preventDefault(),e.updateQuote(e.quoteId,e.QUOTE_STATUS.CONVERTED)}}})])])])],1),e._v(" "),e.quote.customer_info.customer_additional_msg||e.quote.store_info.vendor_additional_msg?t("div",{staticClass:"postbox-container"},[t("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[t("postbox",{attrs:{title:e.__("Additional Message","dokan"),extraClass:"request-quote-msg-settings"}},[t("div",{staticClass:"details"},[e.quote.customer_info.customer_additional_msg?t("div",{attrs:{id:"customer-additional-msg"}},[t("div",{staticClass:"customer-profile"},[void 0!==e.quote.customer_info.user_avatar&&e.quote.customer_info.user_avatar?t("img",{attrs:{height:"42",width:"42",alt:e.__("Customer Avatar","dokan"),src:e.quote.customer_info.user_avatar}}):e._e()]),e._v(" "),t("div",{staticClass:"customer-content"},[t("div",{staticClass:"customer-name"},[t("label",{domProps:{innerHTML:e._s(e.quote.customer_info.name_field)}})]),e._v(" "),t("div",{staticClass:"customer-msg"},[t("p",{domProps:{innerHTML:e._s(e.quote.customer_info.customer_additional_msg)}})])])]):e._e(),e._v(" "),e.quote.customer_info.customer_additional_msg&&e.quote.store_info.vendor_additional_msg?t("hr"):e._e(),e._v(" "),e.quote.store_info.vendor_additional_msg?t("div",{attrs:{id:"vendor-additional-msg"}},[t("div",{staticClass:"customer-profile"},[void 0!==e.quote.store_info.user_avatar&&e.quote.store_info.user_avatar?t("img",{attrs:{height:"42",width:"42",alt:e.__("Vendor Avatar","dokan"),src:e.quote.store_info.user_avatar}}):e._e()]),e._v(" "),t("div",{staticClass:"customer-content"},[t("div",{staticClass:"customer-name"},[t("label",{domProps:{innerHTML:e._s(e.quote.store_info.store_name)}})]),e._v(" "),t("div",{staticClass:"customer-msg"},[t("p",{domProps:{innerHTML:e._s(e.quote.store_info.vendor_additional_msg)}})])])]):e._e()])])],1)]):e._e()]),e._v(" "),t("div",{staticClass:"md:!w-[20%] postbox-container"},[t("postbox",{attrs:{title:e.__("Publish","dokan"),extraClass:"announcement-actions"}},[e.quote.status!==e.QUOTE_STATUS.CONVERTED?t("div",[t("div",{staticClass:"action"},[t("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.draftBtnLabel},on:{click:function(t){return t.preventDefault(),e.createRequestAQuote("draft")}}}),e._v(" "),e.loadSpinner?t("span",{staticClass:"spinner"}):e._e(),e._v(" "),t("div",{staticClass:"clear"})])]):e._e(),e._v(" "),e.quote.status===e.QUOTE_STATUS.CONVERTED?t("h2",[e._v(e._s(e.__("This quote is already converted into order.","dokan")))]):e._e(),e._v(" "),e.quote.order_url&&e.quote.status===e.QUOTE_STATUS.CONVERTED?t("a",{attrs:{target:"_blank"},on:{click:function(t){return t.preventDefault(),e.redirectToOrder.apply(null,arguments)}}},[t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"button",value:e.viewQuoteLinkBtnLabel,disabled:e.loadSpinner},on:{click:function(t){return t.preventDefault(),e.addProductToQuote()}}})]):e._e()])],1)]),e._v(" "),t("br",{staticClass:"clear"})])]),e._v(" "),e.showModal&&e.quote.vendor?t("modal",{attrs:{footer:!0,title:e.__("Add Product(s)","dokan")},on:{close:e.hideModal}},[t("template",{slot:"body"},[t("multiselect",{staticStyle:{width:"75%",float:"left"},attrs:{autocomplete:"off",id:"ajax",label:"product_title","track-by":"id",showNoOptions:!1,placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.requested_products,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{"search-change":e.searchProducts},model:{value:e.product_id,callback:function(t){e.product_id=t},expression:"product_id"}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.product_quantity,expression:"product_quantity"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"number",name:"quantity",size:"10",min:"1",id:"quantity",autocomplete:"off"},domProps:{value:e.product_quantity},on:{input:function(t){t.target.composing||(e.product_quantity=t.target.value)}}})],1),e._v(" "),t("template",{slot:"footer"},[t("button",{staticClass:"button button-primary publish-btn",attrs:{type:"button",disabled:e.loadSpinner},domProps:{innerHTML:e._s(e.addProductToQuoteBtnLabel)},on:{click:function(t){return t.preventDefault(),e.addProductToQuote.apply(null,arguments)}}})])],2):e._e()],1)}),[],!1,null,null,null).exports,k=e({props:["id","label","nodes","depth","hasChildren","savedCategories"],data(){return{showChildren:!!this.$route.params.id}},name:"categoryList",computed:{indent(){return{transform:`translate(${15*this.depth}px)`}}},methods:{toggleChildren(){this.showChildren=!this.showChildren},checkCategory(e){this.$emit("clickedCategory",e)}}},(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"categoryList"},[t("li",{staticClass:"subCategory",style:e.indent},[t("input",{staticClass:"parent",attrs:{type:"checkbox"},domProps:{checked:e.savedCategories.includes(e.id)},on:{click:function(t){return e.checkCategory(e.id)}}}),e._v(" "),t("span",{on:{click:e.toggleChildren}},[e._v("\n            "+e._s(e.label)+" "),e.hasChildren?t("span",[e._v("["+e._s(e.showChildren?"-":"+")+"]")]):e._e()])]),e._v(" "),e._l(e.nodes,(function(s,o){return e.showChildren?t("categoryList",{key:s.id,attrs:{nodes:s.children,label:s.name,id:s.id,savedCategories:e.savedCategories,hasChildren:s.hasChildren,depth:e.depth+1},on:{clickedCategory:e.checkCategory}}):e._e()}))],2)}),[],!1,null,null,null).exports,y=dokan_get_lib("Postbox"),q="request-for-quote/quote-rule",w=dokan_get_lib("debounce"),x=dokan_get_lib("Switches"),C=dokan_get_lib("Multiselect"),S=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1}),P=e({name:"NewQuoteRules",components:{Tabs:t,Postbox:y,Switches:x,Debounce:w,Multiselect:C,categoryList:k},data(){return{loading:!1,showProductsDropdown:!0,createStatus:"publish",isOpen:"",allRoles:[],requested_products:[],requestedCategories:[],quoteRules:[{value:"replace",label:this.__("Replace Add to Cart button with a Quote Button","dokan")},{value:"keep_and_add_new",label:this.__("Keep Add to Cart button and add a new Quote Button","dokan")}],stores:[],rule:{rule_name:"",store_ids:[],product_ids:[],category_ids:[],hide_price:1,expire_limit:30,hide_price_text:this.__("Price is hidden","dokan"),button_text:this.__("Add to quote","dokan"),rule_priority:0,hide_cart_button:"replace",rule_contents:[],exclude_store_ids:[],selected_user_role:[],exclude_product_ids:[],apply_on_all_product:0,switches:{vendor_switch:!1,expire_switch:!1,product_switch:!1,category_switch:!1}},pageTitle:this.__("Add New Rules","dokan"),loadSpinner:!1,draftBtnLabel:this.__("Save as Draft","dokan"),publishBtnLabel:this.__("Publish","dokan"),exclude_stores:[],ruleErrorMessage:[],requested_exclude_products:[]}},computed:{checkRtl:()=>1===isRtl&&void 0!==isRtl?"lang_rtl":""},methods:{toggle:function(e){this.isOpen=this.isOpen!==e?e:""},checkedItem:(e,t)=>t.includes(e),fetchRoles(){this.loading=!0,dokan.api.get("/request-for-quote/roles").done((e=>{this.allRoles=e.role_names,this.allRoles.dokan_wholesale_customer="Wholesale customer",this.allRoles.guest="Guest",this.loading=!1}))},limitText(e){return this.__(`and ${e} other products`,"dokan")},searchProducts:w((function(e=""){let t=this;if(e.length<1)return;const s=this.rule.exclude_product_ids;dokan.api.get("/products",{search:e,request_a_quote:1}).done((e=>{this.requested_products=e.map((function(e){return{id:e.id,name:e.name}})).filter((function(e){return!s.some((t=>t.id===e.id))}))})).fail((e=>{t.filter.stores=[{id:0,name:t.__("No product found","dokan")}];let s=dokan_handle_ajax_error(e);s&&t.showAlert(s,"","error")}))}),300),searchExcludeProducts:w((function(e=""){let t=this;if(e.length<1)return;const s=this.rule.product_ids;dokan.api.get("/products",{search:e,request_a_quote:1}).done((e=>{this.requested_exclude_products=e.map((function(e){return{id:e.id,name:e.name}})).filter((function(e){return!s.some((t=>t.id===e.id))}))})).fail((e=>{t.filter.stores=[{id:0,name:t.__("No product found","dokan")}];let s=dokan_handle_ajax_error(e);s&&t.showAlert(s,"","error")}))}),300),asyncStoreFind:w((function(e=""){if(this.isLoading=!0,e.length<1)return;const t=this.rule.exclude_store_ids;dokan.api.get("/stores",{search:e}).done((e=>{this.isLoading=!1,this.stores=_.map(e,(function(e){return{id:e.id,name:e.store_name}})).filter((function(e){return!t.some((t=>t.id===e.id))}))}))}),300),asyncExcludeStoreFind:w((function(e=""){if(this.isLoading=!0,e.length<1)return;const t=this.rule.store_ids;dokan.api.get("/stores",{search:e}).done((e=>{this.isLoading=!1,this.exclude_stores=_.map(e,(function(e){return{id:e.id,name:e.store_name}})).filter((function(e){return!t.some((t=>t.id===e.id))}))}))}),300),searchCategory(){dokan.api.get("/products/multistep-categories").done((e=>{let t=this;Object.values(e).forEach((function(s){if(0!=s.parent_id)return;let o={id:Number(s.term_id),name:s.name,hasChildren:!1};s.children.length>0&&(o.hasChildren=!0,o.children=t.getChildCategories(e,s.children)),t.requestedCategories.push(o)}))}))},getChildCategories(e,t){let s=[],o=this;return t.forEach((function(t){let a={id:Number(e[t].term_id),name:e[t].name,hasChildren:!1};e[t].children.length>0&&(a.hasChildren=!0,a.children=o.getChildCategories(e,e[t].children)),s.push(a)})),s},createQuoteRules(e){this.$route.params.id?this.updateQuoteRule(e,this.$route.params.id):this.saveQuoteRules(e)},getFilteredJsonData(e){let t=jQuery.extend({},this.rule);return t.status=e,t.product_ids=!t.apply_on_all_product&&Array.isArray(t.product_ids)?t.product_ids.map((e=>e.id)):[],t.exclude_product_ids=!t.apply_on_all_product&&Array.isArray(t.exclude_product_ids)?t.exclude_product_ids.map((e=>e.id)):[],t.category_ids=!t.apply_on_all_product&&Array.isArray(t.category_ids)?t.category_ids.map((e=>e)):[],t.store_ids=!t.apply_on_all_product&&Array.isArray(t.store_ids)?t.store_ids.map((e=>e.id)):[],t.exclude_store_ids=!t.apply_on_all_product&&Array.isArray(t.exclude_store_ids)?t.exclude_store_ids.map((e=>e.id)):[],t},validateFormFields(e){let t=!0;if(this.ruleErrorMessage=[],""!==e.rule_name&&void 0!==e.rule_name||(this.ruleErrorMessage.push(this.__("Please enter rule name.","dokan")),t=!1),e.selected_user_role.length<=0&&(this.ruleErrorMessage.push(this.__("Please select at least one user role.","dokan")),t=!1),""!==e.hide_price_text&&void 0!==e.hide_price_text||(this.ruleErrorMessage.push(this.__("Please enter hide price text.","dokan")),t=!1),""!==e.button_text&&void 0!==e.button_text||(this.ruleErrorMessage.push(this.__("Please enter button text.","dokan")),t=!1),e.switches.expire_switch){const s=e.expire_limit;/^[1-9]\d*$/.test(s)||(this.ruleErrorMessage.push(this.__("Please enter a valid positive integer for quote expiration days limit.","dokan")),t=!1),isNaN(s)&&(this.ruleErrorMessage.push(this.__("Please enter a valid number for quote expiration days limit.","dokan")),t=!1),parseInt(s)<1&&(this.ruleErrorMessage.push(this.__("Expire Limit Can't be Less Than 1.","dokan")),t=!1)}return t},saveQuoteRules(e){this.loadSpinner=!0;let t=this.getFilteredJsonData(e);if(!this.validateFormFields(t))return this.loadSpinner=!1,!1;dokan.api.post("/"+q,t).done((e=>{this.loadSpinner=!1,this.sendToPages()})).fail((e=>{this.loadSpinner=!1;let t=dokan_handle_ajax_error(e);t&&self.showAlert(t,"","error")}))},updateQuoteRule(e,t){this.loadSpinner=!0;let s=this.getFilteredJsonData(e);if(s.id=t,!this.validateFormFields(s))return this.loadSpinner=!1,!1;dokan.api.put("/"+q+"/"+t,s).done((e=>{this.loadSpinner=!1,this.sendToPages()})).fail((e=>{this.loadSpinner=!1;let t=dokan_handle_ajax_error(e);t&&self.showAlert(t,"","error")}))},sendToPages(){this.$router.push({name:"RequestAQuoteRules"})},checkCategory(e){var t=this.rule.category_ids.indexOf(e);t>=0?this.rule.category_ids.splice(t,1):(this.rule.category_ids.push(e),Array.isArray(e)&&(this.rule.category_ids=e))},fetchAQuoteRule(e){this.loading=!0,dokan.api.get("/"+q+"/"+e).done((e=>{this.rule=e,this.rule.hide_price=parseInt(e.hide_price),this.rule.apply_on_all_product=parseInt(e.apply_on_all_product),this.rule.apply_on_all_product&&(this.showProductsDropdown=!1),this.pageTitle=this.__("Edit Rule","dokan"),this.loading=!1,this.rule.store_ids=e.store_ids.map((e=>({id:e.store_id,name:e.store_name}))),this.rule.exclude_store_ids=e.exclude_store_ids.map((e=>({id:e.store_id,name:e.store_name})));for(let t in e.switches)e.switches.hasOwnProperty(t)&&(this.rule.switches[t]="true"===e.switches[t])})).fail((e=>{this.loadSpinner=!1;let t=dokan_handle_ajax_error(e);t&&self.showAlert(t,"","error")}))},showAlert(e,t,s){S.fire(e,t,s)},handleProductDropdown(e){this.showProductsDropdown=!this.showProductsDropdown,this.rule.apply_on_all_product=e},onProductSwitch(e){this.rule.switches.product_switch=e},onCategorySwitch(e){this.rule.switches.category_switch=e},onVendorSwitch(e){this.rule.switches.vendor_switch=e},onExpireSwitch(e){this.rule.switches.expire_switch=e},onHidePrice(e){e&&(this.rule.hide_cart_button="replace"),this.rule.hide_price=e},onChangeRule(e){this.rule.hide_cart_button=e.target.value}},created(){this.$route.params.id&&this.fetchAQuoteRule(this.$route.params.id),this.fetchRoles(),this.searchCategory()}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dokan-quote-form-wrapper"},[t("tabs"),e._v(" "),t("h1",{staticClass:"wp-heading-inline"},[e._v(e._s(e.pageTitle))]),e._v(" "),t("a",{staticClass:"page-title-action",on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.__("Go Back","dokan")))]),e._v(" "),t("hr",{staticClass:"wp-header-end"}),e._v(" "),t("form",{attrs:{action:"",method:"post",id:"post"}},[t("div",{attrs:{id:"poststuff"}},[t("div",{staticClass:"metabox-holder flex sm:flex-col md:flex-row gap-5",attrs:{id:"post-body"}},[t("div",{staticClass:"md:!w-[80%] post-body-content",class:e.checkRtl},[t("div",{attrs:{id:"titlediv"}},[t("div",{attrs:{id:"titlewrap"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.rule_name,expression:"rule.rule_name"}],attrs:{type:"text",name:"rule_name",size:"30",id:"title",autocomplete:"off",placeholder:e.__("Enter rule title","dokan"),required:"required"},domProps:{value:e.rule.rule_name},on:{input:function(t){t.target.composing||e.$set(e.rule,"rule_name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"inside"})]),e._v(" "),t("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[t("postbox",{attrs:{title:e.__("Rule settings","dokan"),extraClass:"request-rule-settings"}},[e.ruleErrorMessage.length>0?t("div",e._l(e.ruleErrorMessage,(function(s,o){return t("ul",{key:o,staticClass:"error-message"},[t("li",[e._v(e._s(s))])])})),0):e._e(),e._v(" "),t("table",{staticClass:"form-table"},[t("tr",[t("th",{staticClass:"cat_text"},[t("label",[e._v("\n                                            "+e._s(e.__("Apply quote for","dokan"))+"\n                                        ")])]),e._v(" "),t("td",[t("ul",{staticClass:"all_cats"},e._l(e.allRoles,(function(s,o){return t("li",{key:o,staticClass:"per_cat"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.selected_user_role,expression:"rule.selected_user_role"}],staticClass:"parent",attrs:{id:o,type:"checkbox"},domProps:{value:o,checked:Array.isArray(e.rule.selected_user_role)?e._i(e.rule.selected_user_role,o)>-1:e.rule.selected_user_role},on:{change:function(t){var s=e.rule.selected_user_role,a=t.target,r=!!a.checked;if(Array.isArray(s)){var i=o,n=e._i(s,i);a.checked?n<0&&e.$set(e.rule,"selected_user_role",s.concat([i])):n>-1&&e.$set(e.rule,"selected_user_role",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.rule,"selected_user_role",r)}}}),e._v(" "),t("label",{attrs:{for:o}},[e._v(e._s(s))])])})),0)])]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Apply on All Products","dokan")))]),e._v(" "),t("td",{attrs:{id:"row-apply-all-product"}},[t("switches",{attrs:{enabled:e.rule.apply_on_all_product,value:e.rule.apply_on_all_product},on:{input:e.handleProductDropdown}}),e._v(" "),t("label",{staticClass:"apply-all-product-label",attrs:{for:"apply_on_all_product"}},[e._v("\n                                            "+e._s(e.__("Check this if you want to apply this rule on all products.","dokan"))+"\n                                        ")])],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown,expression:"showProductsDropdown"}]},[t("th",[e._v(e._s(e.__("Specific Products","dokan")))]),e._v(" "),t("td",[t("switches",{attrs:{enabled:e.rule.switches.product_switch,value:e.rule.switches.product_switch?1:0},on:{input:e.onProductSwitch}})],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown&&e.rule.switches.product_switch,expression:"showProductsDropdown && rule.switches.product_switch"}]},[t("th",[e._v(e._s(e.__("Include Products","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.requested_products,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":e.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":e.searchProducts},model:{value:e.rule.product_ids,callback:function(t){e.$set(e.rule,"product_ids",t)},expression:"rule.product_ids"}},[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown&&e.rule.switches.product_switch,expression:"showProductsDropdown && rule.switches.product_switch"}]},[t("th",[e._v(e._s(e.__("Exclude Products","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.requested_exclude_products,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":e.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":e.searchExcludeProducts},model:{value:e.rule.exclude_product_ids,callback:function(t){e.$set(e.rule,"exclude_product_ids",t)},expression:"rule.exclude_product_ids"}},[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown,expression:"showProductsDropdown"}]},[t("th",{staticClass:"cat_text"},[t("label",[e._v("\n                                            "+e._s(e.__("Specific Categories","dokan"))+"\n                                        ")])]),e._v(" "),t("td",[t("switches",{attrs:{enabled:e.rule.switches.category_switch,value:e.rule.switches.category_switch?1:0},on:{input:e.onCategorySwitch}}),e._v(" "),e.rule.switches.category_switch?t("div",{staticClass:"all_cats"},e._l(e.requestedCategories,(function(s,o){return t("categoryList",{key:s.id,attrs:{label:s.name,nodes:s.children,hasChildren:s.hasChildren,id:s.id,savedCategories:e.rule.category_ids,depth:0},on:{clickedCategory:e.checkCategory}})})),1):e._e()],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown,expression:"showProductsDropdown"}]},[t("th",[e._v(e._s(e.__("Specific Vendors","dokan")))]),e._v(" "),t("td",[t("switches",{attrs:{enabled:e.rule.switches.vendor_switch,value:e.rule.switches.vendor_switch?1:0},on:{input:e.onVendorSwitch}})],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown&&e.rule.switches.vendor_switch,expression:"showProductsDropdown && rule.switches.vendor_switch"}]},[t("th",[e._v(e._s(e.__("Include Vendors","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.stores,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":e.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":e.asyncStoreFind},model:{value:e.rule.store_ids,callback:function(t){e.$set(e.rule,"store_ids",t)},expression:"rule.store_ids"}},[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),e._v(" "),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.showProductsDropdown&&e.rule.switches.vendor_switch,expression:"showProductsDropdown && rule.switches.vendor_switch"}]},[t("th",[e._v(e._s(e.__("Exclude Vendors","dokan")))]),e._v(" "),t("td",[t("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:e.__("Type to search","dokan"),"open-direction":"bottom",options:e.exclude_stores,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":e.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":e.asyncExcludeStoreFind},model:{value:e.rule.exclude_store_ids,callback:function(t){e.$set(e.rule,"exclude_store_ids",t)},expression:"rule.exclude_store_ids"}},[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Expire Limit","dokan")))]),e._v(" "),t("td",[t("switches",{attrs:{enabled:e.rule.switches.expire_switch,value:0},on:{input:e.onExpireSwitch}}),e._v(" "),e.rule.switches.expire_switch?t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.expire_limit,expression:"rule.expire_limit"}],staticClass:"expire-limit",attrs:{type:"number",size:"50",min:"1",autocomplete:"off",placeholder:e.__("Type expiration day","dokan")},domProps:{value:e.rule.expire_limit},on:{input:function(t){t.target.composing||e.$set(e.rule,"expire_limit",t.target.value)}}}):e._e(),e._v(" "),e.rule.switches.expire_switch?t("span",{staticClass:"quote-field-desc"},[e._v("\n                                            "+e._s(e.__("Quote Valid for X Days After Quote Accepted/Approved.","dokan"))+"\n                                        ")]):e._e()],1)]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Hide Price","dokan")))]),e._v(" "),t("td",[t("switches",{attrs:{enabled:1==e.rule.hide_price,value:e.rule.hide_price?1:0,id:"announcement_sender_type"},on:{input:e.onHidePrice}})],1)]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Hide Price Text","dokan")))]),e._v(" "),t("td",{staticClass:"hide-price-text"},[e.rule.hide_price?e._e():t("span",{staticClass:"input-overlay"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.hide_price_text,expression:"rule.hide_price_text"}],attrs:{type:"text",size:"50",autocomplete:"off",disabled:!e.rule.hide_price},domProps:{value:e.rule.hide_price_text},on:{input:function(t){t.target.composing||e.$set(e.rule,"hide_price_text",t.target.value)}}})])]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Hide Add to Cart Button","dokan")))]),e._v(" "),t("td",{staticClass:"hide-price-text"},[e.rule.hide_price?t("span",{staticClass:"input-overlay"}):e._e(),e._v(" "),t("div",{staticClass:"quote-radio-fields"},e._l(e.quoteRules,(function(s,o){return t("label",{key:`${o}-${s.value}`,class:s.value===e.rule.hide_cart_button?"checked":"",attrs:{for:`${o}-${s.value}-${o}`}},[t("input",{staticClass:"radio",attrs:{type:"radio",name:"dokan-group-radio-input",id:`${o}-${s.value}-${o}`},domProps:{value:s.value,checked:s.value===e.rule.hide_cart_button},on:{change:e.onChangeRule}}),e._v("\n                                                "+e._s(s.label)+"\n                                            ")])})),0)])]),e._v(" "),t("tr",[t("th",[e._v(e._s(e.__("Custom Button Label","dokan")))]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.button_text,expression:"rule.button_text"}],staticClass:"quote-bnt-label",attrs:{type:"text",name:"button_text",size:"30",autocomplete:"off",required:"required"},domProps:{value:e.rule.button_text},on:{input:function(t){t.target.composing||e.$set(e.rule,"button_text",t.target.value)}}}),e._v(" "),t("span",{staticClass:"quote-field-desc"},[e._v(e._s(e.__('Display the above label on custom button, e.g "Request a Quote"',"dokan")))])])])])])],1)]),e._v(" "),t("div",{staticClass:"md:!w-[20%] postbox-container"},[t("postbox",{attrs:{title:e.__("Publish","dokan"),extraClass:"quote-actions"}},[t("div",{staticClass:"action"},[t("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.draftBtnLabel},on:{click:function(t){return t.preventDefault(),e.createQuoteRules("draft")}}}),e._v(" "),e.loadSpinner?t("span",{staticClass:"spinner"}):e._e(),e._v(" "),t("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:e.loadSpinner},domProps:{value:e.publishBtnLabel},on:{click:function(t){return t.preventDefault(),e.createQuoteRules(e.createStatus)}}}),e._v(" "),t("div",{staticClass:"clear"})])]),e._v(" "),t("postbox",{attrs:{title:e.__("Rule priority","dokan"),extraClass:"quote-actions"}},[t("div",{staticClass:"order-priority-desc"},[t("strong",[e._v("\n                                "+e._s(e.__("Order","dokan"))+"\n                                "),t("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Order Priority will be 0>1>2>3...\nLast one in the list will get priority when two (or more) rules have same priority 0,0,0...","dokan"),expression:"__( 'Order Priority will be 0>1>2>3...\\n' + 'Last one in the list will get priority when two (or more) rules have same priority 0,0,0...', 'dokan' )"}],staticClass:"dashicons dashicons-editor-help tips",attrs:{title:e.__("Order Priority will be 0>1>2>3...\nLast one in the list will get priority when two (or more) rules have same priority 0,0,0...","dokan")}})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.rule.rule_priority,expression:"rule.rule_priority"}],staticClass:"order-priority-field",attrs:{type:"number",autocomplete:"off",required:"required"},domProps:{value:e.rule.rule_priority},on:{input:function(t){t.target.composing||e.$set(e.rule,"rule_priority",t.target.value)}}})])],1)]),e._v(" "),t("br",{staticClass:"clear"})])])],1)}),[],!1,null,null,null).exports;dokan_add_route(a),dokan_add_route(l),dokan_add_route(b),dokan_add_route(P)})();