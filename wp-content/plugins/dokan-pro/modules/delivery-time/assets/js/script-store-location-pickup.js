!function(t){const e={add_location_section:t("#dokan-add-store-location-section"),show_store_location_section_btn:t("#show-add-store-location-section-btn"),cancel_add_location_action:t("#cancel-store-location-section-btn"),store_location_save_btn:t("#dokan-save-store-location-btn"),store_location_list_table:t("#store-pickup-location-list-table"),store_location_action:t(".dokan-store-location-action"),store_location_edit_btn:t(".store-pickup-location-edit-btn"),store_location_delete_btn:t(".store-pickup-location-delete-btn"),store_location_action_wrapper:t(".store-pickup-location-action-wrapper"),multiple_store_location_checkbox:t("#multiple-store-location"),store_location_edit_section:t("#dokan-store-location-edit-section"),store_location_main_section:t(".dokan-store-location-main-section"),store_location_edit_index:document.getElementById("store-location-edit-index"),store_location_name_input:document.getElementById("store-location-name-input"),store_location_street_1_input:document.getElementById("dokan_address[street_1]"),store_location_street_2_input:document.getElementById("dokan_address[street_2]"),store_location_city_input:document.getElementById("dokan_address[city]"),store_location_zip_code_input:document.getElementById("dokan_address[zip]"),store_location_country_input:document.getElementById("dokan_address_country"),store_location_state_input:document.getElementById("dokan_address_state"),init:function(){e.trigger_store_location_pickup_settings()},trigger_store_location_pickup_settings:function(){const e=this;e.show_store_location_section_btn.on("click",(function(t){t.preventDefault(),e.store_location_action_wrapper.hide(),e.store_location_action.hide(),e.open_store_location_section(!0)})),e.cancel_add_location_action.on("click",(function(t){t.preventDefault(),e.reset_form_fields(),e.store_location_action_wrapper.show(),e.store_location_action.show(),e.open_store_location_section(!1)})),e.store_location_save_btn.on("click",(function(o){o.preventDefault();let n={index:e.store_location_edit_index.value,location_name:e.store_location_name_input.value,street_1:e.store_location_street_1_input.value,street_2:e.store_location_street_2_input.value,city:e.store_location_city_input.value,zip:e.store_location_zip_code_input.value,country:e.store_location_country_input.value,state:t("#dokan_address_state").val(),is_multiple_enable:e.multiple_store_location_checkbox.val()};!1!==e.validate_location_data(n)&&t.ajax({url:dokan.ajaxurl,method:"post",data:{action:"dokan_store_location_save_item",_wpnonce:dokan.nonce,data:n,index:n.index}}).done((function(t){t.success&&window.location.reload(!1)})).fail((function(t,e,o){t.responseJSON.data.message&&dokan_sweetalert(t.responseJSON.data.message,{icon:"error"})}))})),e.store_location_delete_btn.on("click",(function(e){e.preventDefault();const o=t(this).data("location-index");t.ajax({url:dokan.ajaxurl,method:"post",data:{action:"dokan_store_location_delete_item",_wpnonce:dokan.nonce,index:o}}).done((function(t){t.success&&window.location.reload(!1)})).fail((function(t){t.responseJSON&&t.responseJSON.data&&t.responseJSON.data.length&&dokan_sweetalert(t.responseJSON.data.pop().message,{icon:"error"})}))})),e.store_location_edit_btn.on("click",(function(o){o.preventDefault();const n=t(this).data("location"),a=t(this).data("location-index");e.store_location_action_wrapper.hide(),e.store_location_edit_index.value=a,e.populate_address_form_data(n),e.state_select(n),e.store_location_action.hide(),e.open_store_location_section(!0),e.store_location_state_input.value=n.state})),e.multiple_store_location_checkbox.on("change",(function(){this.checked?(e.multiple_store_location_checkbox.val("yes"),e.reset_form_fields(),e.cancel_add_location_action.show(),e.store_location_main_section.show(),e.open_store_location_section(!1)):(e.store_location_edit_index.value=0,e.multiple_store_location_checkbox.val("no"),e.restore_default_address_fields(),e.cancel_add_location_action.hide(),e.store_location_main_section.hide(),e.open_store_location_section(!0))})).trigger("change")},state_select:function(e){let o,n=wc_country_select_params.countries.replace(/&quot;/g,'"'),a=t.parseJSON(n),s=t("#dokan_address_state"),i=s.attr("name"),_=s.attr("id"),c=s.attr("class"),l=e.state,r=e.state,d=t("#dokan_address_country").val();if(a[d])if(t.isEmptyObject(a[d]))t("div#dokan-states-box").slideUp(2),s.is("select")&&t("select#dokan_address_state").replaceWith('<input type="text" class="'+c+'" name="'+i+'" id="'+_+'" required />'),t("#dokan_address_state").val("N/A");else{let e="",n=a[d];for(let t in n)n.hasOwnProperty(t)&&(l&&(o=l===t?'selected="selected"':""),e=e+'<option value="'+t+'"'+o+">"+n[t]+"</option>");s.is("select")&&t("select#dokan_address_state").html('<option value="">'+wc_country_select_params.i18n_select_state_text+"</option>"+e),s.is("input")&&(t("input#dokan_address_state").replaceWith('<select type="text" class="'+c+'" name="'+i+'" id="'+_+'" required ></select>'),t("select#dokan_address_state").html('<option value="">'+wc_country_select_params.i18n_select_state_text+"</option>"+e)),t("#dokan_address_state").removeClass("dokan-hide"),t("div#dokan-states-box").slideDown()}else s.is("select")&&(r=e.state,t("select#dokan_address_state").replaceWith('<input type="text" class="'+c+'" name="'+i+'" id="'+_+'" required="required"/>')),t("#dokan_address_state").val(r),"N/A"==t("#dokan_address_state").val()&&t("#dokan_address_state").val(""),t("#dokan_address_state").removeClass("dokan-hide"),t("div#dokan-states-box").slideDown()},open_store_location_section:function(t){t?(this.add_location_section.show(300),this.show_store_location_section_btn.hide(300)):(this.add_location_section.hide(300),this.show_store_location_section_btn.show(300))},reset_form_fields:function(){this.store_location_edit_index.value="",this.store_location_name_input.value="",this.store_location_street_1_input.value="",this.store_location_street_2_input.value="",this.store_location_city_input.value="",this.store_location_zip_code_input.value="",this.store_location_country_input.value="",this.store_location_state_input.value=""},validate_location_data:function(e){if(!e.location_name)return dokan_sweetalert(dokan.i18n_location_name,{icon:"error"}),!1;if(t("#dokan_address_state").attr("required")&&t("#dokan_address_state").is(":visible")&&!e.state){let e=t("#dokan_address_state").data("state");return dokan_sweetalert(`${dokan.i18n_location_state} ${e||""}`,{icon:"error"}),!1}return!!e.country||(dokan_sweetalert(dokan.i18n_country_name,{icon:"error"}),!1)},populate_address_form_data:function(t){this.store_location_name_input.value=t.location_name,this.store_location_street_1_input.value=t.street_1,this.store_location_street_2_input.value=t.street_2,this.store_location_city_input.value=t.city,this.store_location_zip_code_input.value=t.zip,this.store_location_country_input.value=t.country},restore_default_address_fields:function(){if("undefined"==typeof dokan_vendor_default_address)return;if(0===dokan_vendor_default_address.length)return;const t=dokan_vendor_default_address;this.populate_address_form_data(t),this.state_select(t)}};jQuery(document).ready((function(t){e.init()}))}(jQuery);